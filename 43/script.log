Script started on 2023-10-14 17:03:59+03:00 [TERM="tmux-256color" TTY="/dev/pts/2" COLUMNS="211" LINES="56"]
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ cat Vagrantfile 
[?2004l[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[m
       [38;5;238mâ”‚ [0mFile: [1mVagrantfile[0m[m
[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[m
[38;5;238m   1[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m#[0m[38;2;117;113;94m -*- mode: ruby -*-[0m[m
[38;5;238m   2[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m#[0m[38;2;117;113;94m vim: set ft=ruby :[0m[m
[38;5;238m   3[0m   [38;5;238mâ”‚[0m [m
[38;5;238m   4[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mMACHINES[0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;248;248;242m[[0m[m
[38;5;238m   5[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;248;248;242m{[0m[m
[38;5;238m   6[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mname[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mmaster[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m   7[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_name[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mcentos/7[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m   8[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_version[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m2004.01[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m   9[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mip_addr[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m'[0m[38;2;230;219;116m192.168.56.150[0m[38;2;249;38;114m'[0m[m
[38;5;238m  10[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;248;248;242m}[0m[38;2;248;248;242m,[0m[m
[38;5;238m  11[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;248;248;242m{[0m[m
[38;5;238m  12[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mname[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mslave[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m  13[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_name[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mcentos/7[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m  14[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_version[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m2004.01[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m  15[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;246;240;128m:[0m[38;2;246;240;128mip_addr[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m'[0m[38;2;230;219;116m192.168.56.151[0m[38;2;249;38;114m'[0m[m
[38;5;238m  16[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;248;248;242m}[0m[m
[38;5;238m  17[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m][0m[m
[38;5;238m  18[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  19[0m   [38;5;238mâ”‚[0m [38;2;102;217;239mVagrant[0m[38;2;248;248;242m.[0m[38;2;248;248;242mconfigure[0m[38;2;255;255;255m([0m[38;2;249;38;114m"[0m[38;2;230;219;116m2[0m[38;2;249;38;114m"[0m[38;2;255;255;255m)[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m|[0m[m
[38;5;238m  20[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  21[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;102;217;239mMACHINES[0m[38;2;248;248;242m.[0m[38;2;248;248;242meach [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mboxconfig[0m[38;2;248;248;242m|[0m[m
[38;5;238m  22[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  23[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mdefine boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mname[0m[38;2;248;248;242m][0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mbox[0m[38;2;248;248;242m|[0m[m
[38;5;238m  24[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  25[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mbox [0m[38;2;249;38;114m=[0m[38;2;248;248;242m boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_name[0m[38;2;248;248;242m][0m[m
[38;5;238m  26[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mhost_name [0m[38;2;249;38;114m=[0m[38;2;248;248;242m boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mname[0m[38;2;248;248;242m][0m[m
[38;5;238m  27[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  28[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mnetwork [0m[38;2;249;38;114m"[0m[38;2;230;219;116mprivate_network[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128mip[0m[38;2;246;240;128m:[0m[38;2;248;248;242m boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mip_addr[0m[38;2;248;248;242m][0m[m
[38;5;238m  29[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  30[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mprovider [0m[38;2;246;240;128m:[0m[38;2;246;240;128mvirtualbox[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mvb[0m[38;2;248;248;242m|[0m[m
[38;5;238m  31[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        vb[0m[38;2;248;248;242m.[0m[38;2;248;248;242mcustomize [0m[38;2;248;248;242m[[0m[38;2;249;38;114m"[0m[38;2;230;219;116mmodifyvm[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128m:[0m[38;2;246;240;128mid[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m--memory[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m1024[0m[38;2;249;38;114m"[0m[38;2;248;248;242m][0m[m
[38;5;238m  32[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      [0m[38;2;249;38;114mend[0m[m
[38;5;238m  33[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  34[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mprovision [0m[38;2;246;240;128m:[0m[38;2;246;240;128mshell[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31ms[0m[38;2;248;248;242m|[0m[m
[38;5;238m  35[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         s[0m[38;2;248;248;242m.[0m[38;2;248;248;242minline [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114m'[0m[38;2;230;219;116mmkdir -p ~root/.ssh; cp ~vagrant/.ssh/auth* ~root/.ssh[0m[38;2;249;38;114m'[0m[m
[38;5;238m  36[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      [0m[38;2;249;38;114mend[0m[m
[38;5;238m  37[0m   [38;5;238mâ”‚[0m [m
[38;5;238m  38[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mprovision [0m[38;2;249;38;114m"[0m[38;2;230;219;116mansible[0m[38;2;249;38;114m"[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mansible[0m[38;2;248;248;242m|[0m[m
[38;5;238m  39[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        ansible[0m[38;2;248;248;242m.[0m[38;2;248;248;242minventory_path [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mansible/hosts[0m[38;2;249;38;114m"[0m[m
[38;5;238m  40[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        ansible[0m[38;2;248;248;242m.[0m[38;2;248;248;242mplaybook [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mansible/provision.yaml[0m[38;2;249;38;114m"[0m[m
[38;5;238m  41[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m      [0m[38;2;249;38;114mend[0m[m
[38;5;238m  42[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m    [0m[38;2;249;38;114mend[0m[m
[38;5;238m  43[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m  [0m[38;2;249;38;114mend[0m[m
[38;5;238m  44[0m   [38;5;238mâ”‚[0m [38;2;249;38;114mend[0m[m
[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[m
[K[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant status
[?2004l[0mCurrent machine states:

master                    not created (virtualbox)
slave                     not created (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.[0m
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant up
[?2004l[0mBringing machine 'master' up with 'virtualbox' provider...[0m
[0mBringing machine 'slave' up with 'virtualbox' provider...[0m
[1m==> master: Importing base box 'centos/7'...[0m
[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> master: Matching MAC address for NAT networking...[0m
[1m==> master: Checking if box 'centos/7' version '2004.01' is up to date...[0m
[1m==> master: Setting the name of the VM: 43_master_1697292276508_86120[0m
[1m==> master: Clearing any previously set network interfaces...[0m
[1m==> master: Preparing network interfaces based on configuration...[0m
[0m    master: Adapter 1: nat[0m
[0m    master: Adapter 2: hostonly[0m
[1m==> master: Forwarding ports...[0m
[0m    master: 22 (guest) => 2222 (host) (adapter 1)[0m
[1m==> master: Running 'pre-boot' VM customizations...[0m
[1m==> master: Booting VM...[0m
[1m==> master: Waiting for machine to boot. This may take a few minutes...[0m
[0m    master: SSH address: 127.0.0.1:2222[0m
[0m    master: SSH username: vagrant[0m
[0m    master: SSH auth method: private key[0m
[0m    master: 
    master: Vagrant insecure key detected. Vagrant will automatically replace
    master: this with a newly generated keypair for better security.[0m
[0m    master: 
    master: Inserting generated public key within guest...[0m
[0m    master: Removing insecure key from the guest if it's present...[0m
[0m    master: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> master: Machine booted and ready![0m
[1m==> master: Checking for guest additions in VM...[0m
[0m    master: No guest additions were detected on the base box for this VM! Guest
    master: additions are required for forwarded ports, shared folders, host only
    master: networking, and more. If SSH fails on this machine, please install
    master: the guest additions and repackage the box to continue.
    master: 
    master: This is not an error message; everything may continue to work properly,
    master: in which case you may ignore this message.[0m
[1m==> master: Setting hostname...[0m
[1m==> master: Configuring and enabling network interfaces...[0m
[1m==> master: Rsyncing folder: /home/zoid/projects/otus/2023-04-linux/43/ => /vagrant[0m
[1m==> master: Running provisioner: shell...[0m
[0m    master: Running: inline script[0m
[1m==> master: Running provisioner: ansible...[0m
[0m    master: Running ansible-playbook...[0m
[0m
PLAY [Set up mysql servers] ****************************************************
[0m[0m
TASK [Install python3] *********************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Gather facts] ************************************************************
[0m[0m[0;32mok: [master][0m
[0m[0m
TASK [Install python packages] *************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Install packages] ********************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Add Percona yum repository] **********************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Enable Percona repository] ***********************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Install Perconf] *********************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Copy config] *************************************************************
[0m[0m[0;33mchanged: [master] => (item=01-base.cnf)[0m
[0m[0m[0;33mchanged: [master] => (item=02-max-connections.cnf)[0m
[0m[0m[0;33mchanged: [master] => (item=03-performance.cnf)[0m
[0m[0m[0;33mchanged: [master] => (item=04-slow-query.cnf)[0m
[0m[0m[0;33mchanged: [master] => (item=05-binlog.cnf)[0m
[0m[0m
TASK [Start MySQL server] ******************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Get generated mysql password] ********************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Change MySQL root password] **********************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Copy my.cnf] *************************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Create database] *********************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Restore data from dmp] ***************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Create repl user] ********************************************************
[0m[0m[0;33mchanged: [master][0m
[0m[0m
TASK [Set primary server] ******************************************************
[0m[0m[0;36mskipping: [master][0m
[0m[0m
TASK [Start replication] *******************************************************
[0m[0m[0;36mskipping: [master][0m
[0m[0m
PLAY RECAP *********************************************************************
[0;33mmaster[0m                     : [0;32mok=15  [0m [0;33mchanged=14  [0m unreachable=0    failed=0    [0;36mskipped=2   [0m rescued=0    ignored=0   

[0m[1m==> slave: Importing base box 'centos/7'...[0m
[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> slave: Matching MAC address for NAT networking...[0m
[1m==> slave: Checking if box 'centos/7' version '2004.01' is up to date...[0m
[1m==> slave: Setting the name of the VM: 43_slave_1697292404186_66302[0m
[1m==> slave: Fixed port collision for 22 => 2222. Now on port 2200.[0m
[1m==> slave: Clearing any previously set network interfaces...[0m
[1m==> slave: Preparing network interfaces based on configuration...[0m
[0m    slave: Adapter 1: nat[0m
[0m    slave: Adapter 2: hostonly[0m
[1m==> slave: Forwarding ports...[0m
[0m    slave: 22 (guest) => 2200 (host) (adapter 1)[0m
[1m==> slave: Running 'pre-boot' VM customizations...[0m
[1m==> slave: Booting VM...[0m
[1m==> slave: Waiting for machine to boot. This may take a few minutes...[0m
[0m    slave: SSH address: 127.0.0.1:2200[0m
[0m    slave: SSH username: vagrant[0m
[0m    slave: SSH auth method: private key[0m
[0m    slave: Warning: Connection reset. Retrying...[0m
[0m    slave: Warning: Remote connection disconnect. Retrying...[0m
[0m    slave: Warning: Connection reset. Retrying...[0m
[0m    slave: Warning: Remote connection disconnect. Retrying...[0m
[0m    slave: Warning: Connection reset. Retrying...[0m
[0m    slave: 
    slave: Vagrant insecure key detected. Vagrant will automatically replace
    slave: this with a newly generated keypair for better security.[0m
[0m    slave: 
    slave: Inserting generated public key within guest...[0m
[0m    slave: Removing insecure key from the guest if it's present...[0m
[0m    slave: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> slave: Machine booted and ready![0m
[1m==> slave: Checking for guest additions in VM...[0m
[0m    slave: No guest additions were detected on the base box for this VM! Guest
    slave: additions are required for forwarded ports, shared folders, host only
    slave: networking, and more. If SSH fails on this machine, please install
    slave: the guest additions and repackage the box to continue.
    slave: 
    slave: This is not an error message; everything may continue to work properly,
    slave: in which case you may ignore this message.[0m
[1m==> slave: Setting hostname...[0m
[1m==> slave: Configuring and enabling network interfaces...[0m
[1m==> slave: Rsyncing folder: /home/zoid/projects/otus/2023-04-linux/43/ => /vagrant[0m
[1m==> slave: Running provisioner: shell...[0m
[0m    slave: Running: inline script[0m
[1m==> slave: Running provisioner: ansible...[0m
[0m    slave: Running ansible-playbook...[0m
[0m
PLAY [Set up mysql servers] ****************************************************
[0m[0m
TASK [Install python3] *********************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Gather facts] ************************************************************
[0m[0m[0;32mok: [slave][0m
[0m[0m
TASK [Install python packages] *************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Install packages] ********************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Add Percona yum repository] **********************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Enable Percona repository] ***********************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Install Perconf] *********************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Copy config] *************************************************************
[0m[0m[0;33mchanged: [slave] => (item=01-base.cnf)[0m
[0m[0m[0;33mchanged: [slave] => (item=02-max-connections.cnf)[0m
[0m[0m[0;33mchanged: [slave] => (item=03-performance.cnf)[0m
[0m[0m[0;33mchanged: [slave] => (item=04-slow-query.cnf)[0m
[0m[0m[0;33mchanged: [slave] => (item=05-binlog.cnf)[0m
[0m[0m
TASK [Start MySQL server] ******************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Get generated mysql password] ********************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Change MySQL root password] **********************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Copy my.cnf] *************************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Create database] *********************************************************
[0m[0m[0;36mskipping: [slave][0m
[0m[0m
TASK [Restore data from dmp] ***************************************************
[0m[0m[0;36mskipping: [slave][0m
[0m[0m
TASK [Create repl user] ********************************************************
[0m[0m[0;36mskipping: [slave][0m
[0m[0m
TASK [Set primary server] ******************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
TASK [Start replication] *******************************************************
[0m[0m[0;33mchanged: [slave][0m
[0m[0m
PLAY RECAP *********************************************************************
[0m[0m[0;33mslave[0m                      : [0;32mok=14  [0m [0;33mchanged=13  [0m unreachable=0    failed=0    [0;36mskipped=3   [0m rescued=0    ignored=0   

[0m[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant ssh master
[?2004lLast login: Sat Oct 14 14:06:34 2023 from 192.168.56.1
[vagrant@master ~]$ sudo -o
sudo: invalid option -- 'o'
usage: sudo -h | -K | -k | -V
usage: sudo -v [-AknS] [-g group] [-h host] [-p prompt] [-u user]
usage: sudo -l [-AknS] [-g group] [-h host] [-p prompt] [-U user] [-u user] [command]
usage: sudo [-AbEHknPS] [-r role] [-t type] [-C num] [-g group] [-h host] [-p prompt] [-T timeout] [-u user] [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-AknS] [-r role] [-t type] [-C num] [-g group] [-h host] [-p prompt] [-T timeout] [-u user] file ...
[vagrant@master ~]$ sudo -o i
[root@master ~]# 
[root@master ~]# 
[root@master ~]# 
[root@master ~]# mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 5.7.43-47-log Percona Server (GPL), Release 47, Revision ff1a4d42212

Copyright (c) 2009-2023 Percona LLC and/or its affiliates
Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use bet; ;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> se  show tables;
+------------------+
| Tables_in_bet    |
+------------------+
| bookmaker        |
| competition      |
| events_on_demand |
| market           |
| odds             |
| outcome          |
| v_same_event     |
+------------------+
7 rows in set (0.00 sec)

mysql> select * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
4 rows in set (0.00 sec)

mysql> Bye
[root@master ~]# logout
[vagrant@master ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant ssh master[K[K[K[K[K[Kslave
[?2004lLast login: Sat Oct 14 14:08:59 2023 from 192.168.56.1
[vagrant@slave ~]$ sudo -i
[root@slave ~]# vagrant       
[root@slave ~]# 
[root@slave ~]# mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7
Server version: 5.7.43-47-log Percona Server (GPL), Release 47, Revision ff1a4d42212

Copyright (c) 2009-2023 Percona LLC and/or its affiliates
Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use bet;        show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| bet                |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.00 sec)

mysql> use bet;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------+
| Tables_in_bet |
+---------------+
| bookmaker     |
| competition   |
| market        |
| odds          |
| outcome       |
+---------------+
5 rows in set (0.00 sec)

mysql> select * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
4 rows in set (0.00 sec)

mysql> Bye
[root@slave ~]# logout
[vagrant@slave ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant ssh slavemaster
[?2004lLast login: Sat Oct 14 14:09:15 2023 from 10.0.2.2
[vagrant@master ~]$ sudo -i
[root@master ~]# mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 5.7.43-47-log Percona Server (GPL), Release 47, Revision ff1a4d42212

Copyright (c) 2009-2023 Percona LLC and/or its affiliates
Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use bet;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> use bet;select * from bookmaker;mysql> show tables;            mysql> select * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
4 rows in set (0.00 sec)

mysql> select (  * f    * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
4 rows in set (0.00 sec)

mysql> 
mysql> 
mysql> script --timing=timing.log script.log^C                                     ^C
^C
mysql> INSERT INTO bookmaker (id,bookmaker_name) VALUES(1,'1xbet');
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookmaker (id,bookmaker_name) VALUES(1,'1xbet');mysql> select * from bookmaker;                                    mysql> select * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  1 | 1xbet          |
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
5 rows in set (0.00 sec)

mysql> Bye
[root@master ~]# logout
[vagrant@master ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ vagrant ssh master[1Pslave
[?2004lLast login: Sat Oct 14 14:10:00 2023 from 10.0.2.2
[vagrant@slave ~]$ sudo -i
[root@slave ~]# 
[root@slave ~]# 
[root@slave ~]# 
[root@slave ~]# mysql     mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 5.7.43-47-log Percona Server (GPL), Release 47, Revision ff1a4d42212

Copyright (c) 2009-2023 Percona LLC and/or its affiliates
Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> select * from bookmaker;mysql> show tables;            mysql> use bet;    
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> use bet;select * from bookmaker;
+----+----------------+
| id | bookmaker_name |
+----+----------------+
|  1 | 1xbet          |
|  4 | betway         |
|  5 | bwin           |
|  6 | ladbrokes      |
|  3 | unibet         |
+----+----------------+
5 rows in set (0.00 sec)

mysql> Bye
[root@slave ~]# logout
[vagrant@slave ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/43[00m$ [?2004l
exit

Script done on 2023-10-14 17:12:27+03:00 [COMMAND_EXIT_CODE="0"]
