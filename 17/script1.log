Script started on 2023-07-05 17:13:13+03:00 [TERM="tmux-256color" TTY="/dev/pts/2" COLUMNS="178" LINES="62"]
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ l[Kvagra[K[K[K[K[Kcat Vagrantfile 
[?2004l[38;5;238m───────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────[0m[m
       [38;5;238m│ [0mFile: [1mVagrantfile[0m[m
[38;5;238m───────┼──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────[0m[m
[38;5;238m   1[0m   [38;5;238m│[0m [38;2;117;113;94m#[0m[38;2;117;113;94m -*- mode: ruby -*-[0m[m
[38;5;238m   2[0m   [38;5;238m│[0m [38;2;117;113;94m#[0m[38;2;117;113;94m vim: set ft=ruby :[0m[m
[38;5;238m   3[0m   [38;5;238m│[0m [m
[38;5;238m   4[0m   [38;5;238m│[0m [m
[38;5;238m   5[0m   [38;5;238m│[0m [38;2;166;226;46mMACHINES[0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m[m
[38;5;238m   6[0m   [38;5;238m│[0m [38;2;248;248;242m  [0m[38;2;246;240;128m:[0m[38;2;246;240;128mselinux[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m[m
[38;5;238m   7[0m   [38;5;238m│[0m [38;2;248;248;242m        [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_name[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mcentos/7[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m   8[0m   [38;5;238m│[0m [38;2;248;248;242m        [0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_version[0m[38;2;248;248;242m [0m[38;2;248;248;242m=>[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m2004.01[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[m
[38;5;238m   9[0m   [38;5;238m│[0m [38;2;248;248;242m  [0m[38;2;248;248;242m}[0m[38;2;248;248;242m,[0m[m
[38;5;238m  10[0m   [38;5;238m│[0m [38;2;248;248;242m}[0m[m
[38;5;238m  11[0m   [38;5;238m│[0m [m
[38;5;238m  12[0m   [38;5;238m│[0m [m
[38;5;238m  13[0m   [38;5;238m│[0m [38;2;102;217;239mVagrant[0m[38;2;248;248;242m.[0m[38;2;248;248;242mconfigure[0m[38;2;255;255;255m([0m[38;2;249;38;114m"[0m[38;2;230;219;116m2[0m[38;2;249;38;114m"[0m[38;2;255;255;255m)[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m|[0m[m
[38;5;238m  14[0m   [38;5;238m│[0m [38;2;248;248;242m  [0m[38;2;102;217;239mMACHINES[0m[38;2;248;248;242m.[0m[38;2;248;248;242meach [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mboxname[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;253;151;31mboxconfig[0m[38;2;248;248;242m|[0m[m
[38;5;238m  15[0m   [38;5;238m│[0m [38;2;248;248;242m      config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mdefine boxname [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mbox[0m[38;2;248;248;242m|[0m[m
[38;5;238m  16[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mbox [0m[38;2;249;38;114m=[0m[38;2;248;248;242m boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_name[0m[38;2;248;248;242m][0m[m
[38;5;238m  17[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mbox_version [0m[38;2;249;38;114m=[0m[38;2;248;248;242m boxconfig[0m[38;2;248;248;242m[[0m[38;2;246;240;128m:[0m[38;2;246;240;128mbox_version[0m[38;2;248;248;242m][0m[m
[38;5;238m  18[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mhost_name [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116mselinux[0m[38;2;249;38;114m"[0m[m
[38;5;238m  19[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mnetwork [0m[38;2;249;38;114m"[0m[38;2;230;219;116mforwarded_port[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128mguest[0m[38;2;246;240;128m:[0m[38;2;248;248;242m [0m[38;2;190;132;255m4881[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128mhost[0m[38;2;246;240;128m:[0m[38;2;248;248;242m [0m[38;2;190;132;255m4881[0m[m
[38;5;238m  20[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mprovider [0m[38;2;246;240;128m:[0m[38;2;246;240;128mvirtualbox[0m[38;2;248;248;242m [0m[38;2;249;38;114mdo[0m[38;2;248;248;242m [0m[38;2;248;248;242m|[0m[38;2;253;151;31mvb[0m[38;2;248;248;242m|[0m[m
[38;5;238m  21[0m   [38;5;238m│[0m [38;2;248;248;242m              vb[0m[38;2;248;248;242m.[0m[38;2;248;248;242mcustomize [0m[38;2;248;248;242m[[0m[38;2;249;38;114m"[0m[38;2;230;219;116mmodifyvm[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128m:[0m[38;2;246;240;128mid[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m--memory[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m"[0m[38;2;230;219;116m1024[0m[38;2;249;38;114m"[0m[38;2;248;248;242m][0m[m
[38;5;238m  22[0m   [38;5;238m│[0m [38;2;248;248;242m        [0m[38;2;249;38;114mend[0m[m
[38;5;238m  23[0m   [38;5;238m│[0m [38;2;248;248;242m        box[0m[38;2;248;248;242m.[0m[38;2;248;248;242mvm[0m[38;2;248;248;242m.[0m[38;2;248;248;242mprovision [0m[38;2;249;38;114m"[0m[38;2;230;219;116mshell[0m[38;2;249;38;114m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;246;240;128minline[0m[38;2;246;240;128m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m<<-SH[0m[38;2;248;248;242mELL[0m[m
[38;5;238m  24[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#install[0m[38;2;255;255;255m epel-release[0m[m
[38;5;238m  25[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255myum[0m[38;2;255;255;255m install[0m[38;2;253;151;31m -[0m[38;2;253;151;31my[0m[38;2;255;255;255m epel-release[0m[m
[38;5;238m  26[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#install[0m[38;2;255;255;255m nginx[0m[m
[38;5;238m  27[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255myum[0m[38;2;255;255;255m install[0m[38;2;253;151;31m -[0m[38;2;253;151;31my[0m[38;2;255;255;255m nginx[0m[m
[38;5;238m  28[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#change[0m[38;2;255;255;255m nginx port[0m[m
[38;5;238m  29[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255msed[0m[38;2;253;151;31m -[0m[38;2;253;151;31mie[0m[38;2;255;255;255m [0m[38;2;255;255;255m'[0m[38;2;230;219;116ms/:80/:4881/g[0m[38;2;255;255;255m'[0m[38;2;255;255;255m /etc/nginx/nginx.conf[0m[m
[38;5;238m  30[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255msed[0m[38;2;253;151;31m -[0m[38;2;253;151;31mi[0m[38;2;255;255;255m [0m[38;2;255;255;255m'[0m[38;2;230;219;116ms/listen       80;/listen       4881;/[0m[38;2;255;255;255m'[0m[38;2;255;255;255m /etc/nginx/nginx.conf[0m[m
[38;5;238m  31[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#disable[0m[38;2;255;255;255m SELinux[0m[m
[38;5;238m  32[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#setenforce[0m[38;2;255;255;255m 0[0m[m
[38;5;238m  33[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#start[0m[38;2;255;255;255m nginx[0m[m
[38;5;238m  34[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255msystemctl[0m[38;2;255;255;255m start nginx[0m[m
[38;5;238m  35[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255msystemctl[0m[38;2;255;255;255m status nginx[0m[m
[38;5;238m  36[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255m#check[0m[38;2;255;255;255m nginx port[0m[m
[38;5;238m  37[0m   [38;5;238m│[0m [38;2;255;255;255m          [0m[38;2;255;255;255mss[0m[38;2;253;151;31m -[0m[38;2;253;151;31mtlpn[0m[38;2;255;255;255m [0m[38;2;249;38;114m|[0m[38;2;255;255;255m [0m[38;2;255;255;255mgrep[0m[38;2;255;255;255m 4881[0m[m
[38;5;238m  38[0m   [38;5;238m│[0m [38;2;255;255;255m        [0m[38;2;255;255;255mSHELL[0m[m
[38;5;238m  39[0m   [38;5;238m│[0m [38;2;255;255;255m    [0m[38;2;255;255;255mend[0m[m
[38;5;238m  40[0m   [38;5;238m│[0m [38;2;255;255;255m  [0m[38;2;255;255;255mend[0m[m
[38;5;238m  41[0m   [38;5;238m│[0m [38;2;255;255;255mend[0m[m
[38;5;238m───────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────[0m[m
[K[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ vagrant up[[K
[?2004l[0mBringing machine 'selinux' up with 'virtualbox' provider...[0m
[1m==> selinux: Importing base box 'centos/7'...[0m
[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> selinux: Matching MAC address for NAT networking...[0m
[1m==> selinux: Checking if box 'centos/7' version '2004.01' is up to date...[0m
[1m==> selinux: Setting the name of the VM: 17_selinux_1688566424658_95848[0m
[1m==> selinux: Clearing any previously set network interfaces...[0m
[1m==> selinux: Preparing network interfaces based on configuration...[0m
[0m    selinux: Adapter 1: nat[0m
[1m==> selinux: Forwarding ports...[0m
[0m    selinux: 4881 (guest) => 4881 (host) (adapter 1)[0m
[0m    selinux: 22 (guest) => 2222 (host) (adapter 1)[0m
[1m==> selinux: Running 'pre-boot' VM customizations...[0m
[1m==> selinux: Booting VM...[0m
[1m==> selinux: Waiting for machine to boot. This may take a few minutes...[0m
[0m    selinux: SSH address: 127.0.0.1:2222[0m
[0m    selinux: SSH username: vagrant[0m
[0m    selinux: SSH auth method: private key[0m
[0m    selinux: 
    selinux: Vagrant insecure key detected. Vagrant will automatically replace
    selinux: this with a newly generated keypair for better security.[0m
[0m    selinux: 
    selinux: Inserting generated public key within guest...[0m
[0m    selinux: Removing insecure key from the guest if it's present...[0m
[0m    selinux: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> selinux: Machine booted and ready![0m
[1m==> selinux: Checking for guest additions in VM...[0m
[0m    selinux: No guest additions were detected on the base box for this VM! Guest
    selinux: additions are required for forwarded ports, shared folders, host only
    selinux: networking, and more. If SSH fails on this machine, please install
    selinux: the guest additions and repackage the box to continue.
    selinux: 
    selinux: This is not an error message; everything may continue to work properly,
    selinux: in which case you may ignore this message.[0m
[1m==> selinux: Setting hostname...[0m
[1m==> selinux: Rsyncing folder: /home/zoid/projects/otus/2023-04-linux/17/ => /vagrant[0m
[1m==> selinux: Running provisioner: shell...[0m
[0m    selinux: Running: inline script[0m
[0;32m    selinux: Loaded plugins: fastestmirror[0m
[0;32m    selinux: Determining fastest mirrors[0m
[0;32m    selinux:  * base: mirrors.powernet.com.ru[0m
[0;32m    selinux:  * extras: mirror.corbina.net[0m
[0;32m    selinux:  * updates: mirror.corbina.net[0m
[0;32m    selinux: Resolving Dependencies[0m
[0;32m    selinux: --> Running transaction check[0m
[0;32m    selinux: ---> Package epel-release.noarch 0:7-11 will be installed[0m
[0;32m    selinux: --> Finished Dependency Resolution[0m
[0;32m    selinux: [0m
[0;32m    selinux: Dependencies Resolved[0m
[0;32m    selinux: [0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux:  Package                Arch             Version         Repository        Size[0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux: Installing:[0m
[0;32m    selinux:  epel-release           noarch           7-11            extras            15 k[0m
[0;32m    selinux: [0m
[0;32m    selinux: Transaction Summary[0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux: Install  1 Package[0m
[0;32m    selinux: [0m
[0;32m    selinux: Total download size: 15 k[0m
[0;32m    selinux: Installed size: 24 k[0m
[0;32m    selinux: Downloading packages:[0m
[0;32m    selinux: Public key for epel-release-7-11.noarch.rpm is not installed[0m
[0;31m    selinux: warning: /var/cache/yum/x86_64/7/extras/packages/epel-release-7-11.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY[0m
[0;32m    selinux: Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[0m
[0;31m    selinux: Importing GPG key 0xF4A80EB5:[0m
[0;31m    selinux:  Userid     : "CentOS-7 Key (CentOS 7 Official Signing Key) <security@centos.org>"[0m
[0;31m    selinux:  Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5[0m
[0;31m    selinux:  Package    : centos-release-7-8.2003.0.el7.centos.x86_64 (@anaconda)[0m
[0;31m    selinux:  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[0m
[0;32m    selinux: Running transaction check[0m
[0;32m    selinux: Running transaction test[0m
[0;32m    selinux: Transaction test succeeded[0m
[0;32m    selinux: Running transaction[0m
[0;32m    selinux:   Installing : epel-release-7-11.noarch                                     1/1[0m
[0;32m    selinux:   Verifying  : epel-release-7-11.noarch                                     1/1[0m
[0;32m    selinux: [0m
[0;32m    selinux: Installed:[0m
[0;32m    selinux:   epel-release.noarch 0:7-11[0m
[0;32m    selinux: [0m
[0;32m    selinux: Complete![0m
[0;32m    selinux: Loaded plugins: fastestmirror[0m
[0;32m    selinux: Loading mirror speeds from cached hostfile[0m
[0;32m    selinux:  * base: mirrors.powernet.com.ru[0m
[0;32m    selinux:  * epel: mirror.nsc.liu.se[0m
[0;32m    selinux:  * extras: mirror.corbina.net[0m
[0;32m    selinux:  * updates: mirror.corbina.net[0m
[0;32m    selinux: Resolving Dependencies[0m
[0;32m    selinux: --> Running transaction check[0m
[0;32m    selinux: ---> Package nginx.x86_64 1:1.20.1-10.el7 will be installed[0m
[0;32m    selinux: --> Processing Dependency: nginx-filesystem = 1:1.20.1-10.el7 for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libcrypto.so.1.1(OPENSSL_1_1_0)(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libssl.so.1.1(OPENSSL_1_1_0)(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libssl.so.1.1(OPENSSL_1_1_1)(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: nginx-filesystem for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: redhat-indexhtml for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: system-logos for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libcrypto.so.1.1()(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libprofiler.so.0()(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Processing Dependency: libssl.so.1.1()(64bit) for package: 1:nginx-1.20.1-10.el7.x86_64[0m
[0;32m    selinux: --> Running transaction check[0m
[0;32m    selinux: ---> Package centos-indexhtml.noarch 0:7-9.el7.centos will be installed[0m
[0;32m    selinux: ---> Package centos-logos.noarch 0:70.0.6-3.el7.centos will be installed[0m
[0;32m    selinux: ---> Package gperftools-libs.x86_64 0:2.6.1-1.el7 will be installed[0m
[0;32m    selinux: ---> Package nginx-filesystem.noarch 1:1.20.1-10.el7 will be installed[0m
[0;32m    selinux: ---> Package openssl11-libs.x86_64 1:1.1.1k-5.el7 will be installed[0m
[0;32m    selinux: --> Finished Dependency Resolution[0m
[0;32m    selinux: [0m
[0;32m    selinux: Dependencies Resolved[0m
[0;32m    selinux: [0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux:  Package                Arch         Version                   Repository  Size[0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux: Installing:[0m
[0;32m    selinux:  nginx                  x86_64       1:1.20.1-10.el7           epel       588 k[0m
[0;32m    selinux: Installing for dependencies:[0m
[0;32m    selinux:  centos-indexhtml       noarch       7-9.el7.centos            base        92 k[0m
[0;32m    selinux:  centos-logos           noarch       70.0.6-3.el7.centos       base        21 M[0m
[0;32m    selinux:  gperftools-libs        x86_64       2.6.1-1.el7               base       272 k[0m
[0;32m    selinux:  nginx-filesystem       noarch       1:1.20.1-10.el7           epel        24 k[0m
[0;32m    selinux:  openssl11-libs         x86_64       1:1.1.1k-5.el7            epel       1.5 M[0m
[0;32m    selinux: [0m
[0;32m    selinux: Transaction Summary[0m
[0;32m    selinux: ================================================================================[0m
[0;32m    selinux: Install  1 Package (+5 Dependent packages)[0m
[0;32m    selinux: [0m
[0;32m    selinux: Total download size: 24 M[0m
[0;32m    selinux: Installed size: 28 M[0m
[0;32m    selinux: Downloading packages:[0m
[0;32m    selinux: Public key for nginx-1.20.1-10.el7.x86_64.rpm is not installed[0m
[0;31m    selinux: warning: /var/cache/yum/x86_64/7/epel/packages/nginx-1.20.1-10.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 352c64e5: NOKEY[0m
[0;32m    selinux: --------------------------------------------------------------------------------[0m
[0;32m    selinux: Total                                              9.8 MB/s |  24 MB  00:02[0m
[0;32m    selinux: Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7[0m
[0;31m    selinux: Importing GPG key 0x352C64E5:[0m
[0;31m    selinux:  Userid     : "Fedora EPEL (7) <epel@fedoraproject.org>"[0m
[0;31m    selinux:  Fingerprint: 91e9 7d7c 4a5e 96f1 7f3e 888f 6a2f aea2 352c 64e5[0m
[0;31m    selinux:  Package    : epel-release-7-11.noarch (@extras)[0m
[0;31m    selinux:  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7[0m
[0;32m    selinux: Running transaction check[0m
[0;32m    selinux: Running transaction test[0m
[0;32m    selinux: Transaction test succeeded[0m
[0;32m    selinux: Running transaction[0m
[0;32m    selinux:   Installing : centos-logos-70.0.6-3.el7.centos.noarch                      1/6[0m
[0;32m    selinux:   Installing : 1:openssl11-libs-1.1.1k-5.el7.x86_64                         2/6[0m
[0;32m    selinux:   Installing : centos-indexhtml-7-9.el7.centos.noarch                       3/6[0m
[0;32m    selinux:   Installing : gperftools-libs-2.6.1-1.el7.x86_64                           4/6[0m
[0;32m    selinux:   Installing : 1:nginx-filesystem-1.20.1-10.el7.noarch                      5/6[0m
[0;32m    selinux:   Installing : 1:nginx-1.20.1-10.el7.x86_64                                 6/6[0m
[0;32m    selinux:   Verifying  : 1:nginx-filesystem-1.20.1-10.el7.noarch                      1/6[0m
[0;32m    selinux:   Verifying  : gperftools-libs-2.6.1-1.el7.x86_64                           2/6[0m
[0;32m    selinux:   Verifying  : 1:nginx-1.20.1-10.el7.x86_64                                 3/6[0m
[0;32m    selinux:   Verifying  : centos-indexhtml-7-9.el7.centos.noarch                       4/6[0m
[0;32m    selinux:   Verifying  : 1:openssl11-libs-1.1.1k-5.el7.x86_64                         5/6[0m
[0;32m    selinux:   Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      6/6[0m
[0;32m    selinux: [0m
[0;32m    selinux: Installed:[0m
[0;32m    selinux:   nginx.x86_64 1:1.20.1-10.el7[0m
[0;32m    selinux: [0m
[0;32m    selinux: Dependency Installed:[0m
[0;32m    selinux:   centos-indexhtml.noarch 0:7-9.el7.centos[0m
[0;32m    selinux:   centos-logos.noarch 0:70.0.6-3.el7.centos[0m
[0;32m    selinux:   gperftools-libs.x86_64 0:2.6.1-1.el7[0m
[0;32m    selinux:   nginx-filesystem.noarch 1:1.20.1-10.el7[0m
[0;32m    selinux:   openssl11-libs.x86_64 1:1.1.1k-5.el7[0m
[0;32m    selinux: [0m
[0;32m    selinux: Complete![0m
[0;31m    selinux: Job for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.[0m
[0;32m    selinux: ● nginx.service - The nginx HTTP and reverse proxy server[0m
[0;32m    selinux:    Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)[0m
[0;32m    selinux:    Active: failed (Result: exit-code) since Wed 2023-07-05 14:14:43 UTC; 8ms ago[0m
[0;32m    selinux:   Process: 2795 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=1/FAILURE)[0m
[0;32m    selinux:   Process: 2794 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)[0m
[0;32m    selinux: [0m
[0;32m    selinux: Jul 05 14:14:43 selinux systemd[1]: Starting The nginx HTTP and reverse proxy server...[0m
[0;32m    selinux: Jul 05 14:14:43 selinux nginx[2795]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok[0m
[0;32m    selinux: Jul 05 14:14:43 selinux nginx[2795]: nginx: [emerg] bind() to 0.0.0.0:4881 failed (13: Permission denied)[0m
[0;32m    selinux: Jul 05 14:14:43 selinux nginx[2795]: nginx: configuration file /etc/nginx/nginx.conf test failed[0m
[0;32m    selinux: Jul 05 14:14:43 selinux systemd[1]: nginx.service: control process exited, code=exited status=1[0m
[0;32m    selinux: Jul 05 14:14:43 selinux systemd[1]: Failed to start The nginx HTTP and reverse proxy server.[0m
[0;32m    selinux: Jul 05 14:14:43 selinux systemd[1]: Unit nginx.service entered failed state.[0m
[0;32m    selinux: Jul 05 14:14:43 selinux systemd[1]: nginx.service failed.[0m
[0;31mThe SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.[0m
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ vagrant ssh
[?2004l[vagrant@selinux ~]$ sudo -i
[root@selinux ~]# systemctl status firewalld
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)
   Active: inactive (dead)
     Docs: man:firewalld(1)
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
[root@selinux ~]# geten
getenforce  getent      
[root@selinux ~]# geten
getenforce  getent      
[root@selinux ~]# getend force 
Enforcing
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# y # --- install audit2...
[root@selinux ~]# yum install policycoreutils-python
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.powernet.com.ru
 * epel: fedora-mirror02.rbc.ru
 * extras: mirror.corbina.net
 * updates: mirror.corbina.net
Resolving Dependencies
--> Running transaction check
---> Package policycoreutils-python.x86_64 0:2.5-34.el7 will be installed
--> Processing Dependency: setools-libs >= 3.3.8-4 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libsemanage-python >= 2.5-14 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: audit-libs-python >= 2.1.3-4 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: python-IPy for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1(VERS_1.4)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1(VERS_1.2)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libcgroup for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libapol.so.4(VERS_4.0)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: checkpolicy for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1()(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libapol.so.4()(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Running transaction check
---> Package audit-libs-python.x86_64 0:2.8.5-4.el7 will be installed
---> Package checkpolicy.x86_64 0:2.5-8.el7 will be installed
---> Package libcgroup.x86_64 0:0.41-21.el7 will be installed
---> Package libsemanage-python.x86_64 0:2.5-14.el7 will be installed
---> Package python-IPy.noarch 0:0.75-6.el7 will be installed
---> Package setools-libs.x86_64 0:3.3.8-4.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

==================================================================================================================================================================================
 Package                                               Arch                                  Version                                    Repository                           Size
==================================================================================================================================================================================
Installing:
 policycoreutils-python                                x86_64                                2.5-34.el7                                 base                                457 k
Installing for dependencies:
 audit-libs-python                                     x86_64                                2.8.5-4.el7                                base                                 76 k
 checkpolicy                                           x86_64                                2.5-8.el7                                  base                                295 k
 libcgroup                                             x86_64                                0.41-21.el7                                base                                 66 k
 libsemanage-python                                    x86_64                                2.5-14.el7                                 base                                113 k
 python-IPy                                            noarch                                0.75-6.el7                                 base                                 32 k
 setools-libs                                          x86_64                                3.3.8-4.el7                                base                                620 k

Transaction Summary
==================================================================================================================================================================================
Install  1 Package (+6 Dependent packages)

Total download size: 1.6 M
Installed size: 5.3 M
Is this ok [y/d/N]: y
Downloading packages:
(1/7): audit-libs-python-2.8.5-4.el7.x86_64.rpm                                                                                                            |  76 kB  00:00:00     
(2/7): libcgroup-0.41-21.el7.x86_64.rpm                                                                                                                    |  66 kB  00:00:00     
(3/7): libsemanage-python-2.5-14.el7.x86_64.rpm                                                                                                            | 113 kB  00:00:00     
(4/7): python-IPy-0.75-6.el7.noarch.rpm                                                                                                                    |  32 kB  00:00:00     
(5/7): checkpolicy-2.5-8.el7.x86_64.rpm                                                                                                                    | 295 kB  00:00:00     
(6/7): policycoreutils-python-2.5-34.el7.x86_64.rpm                                                                                                        | 457 kB  00:00:00     
(7/7): setools-libs-3.3.8-4.el7.x86_64.rpm                                                                                                                 | 620 kB  00:00:00     
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                             3.1 MB/s | 1.6 MB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : libcgroup-0.41-21.el7.x86_64 [                                                                                                                               ] 1/7  Installing : libcgroup-0.41-21.el7.x86_64 [###########################################################                                                                    ] 1/7  Installing : libcgroup-0.41-21.el7.x86_64 [###############################################################################################                                ] 1/7  Installing : libcgroup-0.41-21.el7.x86_64 [########################################################################################################################       ] 1/7  Installing : libcgroup-0.41-21.el7.x86_64 [#############################################################################################################################  ] 1/7  Installing : libcgroup-0.41-21.el7.x86_64                                                                                                                                   1/7 
  Installing : setools-libs-3.3.8-4.el7.x86_64 [                                                                                                                            ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###                                                                                                                         ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#######                                                                                                                     ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [############                                                                                                                ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##############                                                                                                              ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##################                                                                                                          ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [######################                                                                                                      ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#######################                                                                                                     ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [############################                                                                                                ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [################################                                                                                            ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###################################                                                                                         ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [########################################                                                                                    ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [############################################                                                                                ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#################################################                                                                           ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#####################################################                                                                       ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##########################################################                                                                  ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##############################################################                                                              ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#################################################################                                                           ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [######################################################################                                                      ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##########################################################################                                                  ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###############################################################################                                             ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [################################################################################                                            ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [####################################################################################                                        ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [########################################################################################                                    ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#############################################################################################                               ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###############################################################################################                             ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###################################################################################################                         ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [########################################################################################################                    ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###########################################################################################################                 ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [################################################################################################################            ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##################################################################################################################          ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [###################################################################################################################         ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#####################################################################################################################       ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#######################################################################################################################     ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [########################################################################################################################    ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [#########################################################################################################################   ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64 [##########################################################################################################################  ] 2/7  Installing : setools-libs-3.3.8-4.el7.x86_64                                                                                                                                2/7 
  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [                                                                                                                       ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [#######################                                                                                                ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [###############################################                                                                        ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [############################################################                                                           ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [##############################################################################                                         ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [######################################################################################################                 ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64 [#####################################################################################################################  ] 3/7  Installing : audit-libs-python-2.8.5-4.el7.x86_64                                                                                                                           3/7 
  Installing : python-IPy-0.75-6.el7.noarch [                                                                                                                               ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [##########                                                                                                                     ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [##############################################################                                                                 ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [################################################################                                                               ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [##################################################################                                                             ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [####################################################################                                                           ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [##############################################################################                                                 ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [###################################################################################                                            ] 4/7  Installing : python-IPy-0.75-6.el7.noarch [#############################################################################################################################  ] 4/7  Installing : python-IPy-0.75-6.el7.noarch                                                                                                                                   4/7 
  Installing : libsemanage-python-2.5-14.el7.x86_64 [                                                                                                                       ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [################                                                                                                       ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [#################################                                                                                      ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [###################################################                                                                    ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [###################################################################                                                    ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [###################################################################################                                    ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [#################################################################################################                      ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [###################################################################################################                    ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64 [#####################################################################################################################  ] 5/7  Installing : libsemanage-python-2.5-14.el7.x86_64                                                                                                                           5/7 
  Installing : checkpolicy-2.5-8.el7.x86_64 [                                                                                                                               ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [######                                                                                                                         ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [############                                                                                                                   ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [###################                                                                                                            ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#########################                                                                                                      ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [###############################                                                                                                ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [######################################                                                                                         ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#######################################                                                                                        ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#############################################                                                                                  ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [####################################################                                                                           ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [###########################################################                                                                    ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [##################################################################                                                             ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [########################################################################                                                       ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [##############################################################################                                                 ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#################################################################################                                              ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#######################################################################################                                        ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#############################################################################################                                  ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [####################################################################################################                           ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [##########################################################################################################                     ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#################################################################################################################              ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#######################################################################################################################        ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [############################################################################################################################   ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64 [#############################################################################################################################  ] 6/7  Installing : checkpolicy-2.5-8.el7.x86_64                                                                                                                                   6/7 
  Installing : policycoreutils-python-2.5-34.el7.x86_64 [                                                                                                                   ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#                                                                                                                  ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##                                                                                                                 ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###                                                                                                                ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [####                                                                                                               ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#####                                                                                                              ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###########                                                                                                        ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#################                                                                                                  ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##################                                                                                                 ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###################                                                                                                ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [####################                                                                                               ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#####################                                                                                              ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#########################                                                                                          ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##########################                                                                                         ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###########################                                                                                        ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [############################                                                                                       ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#############################                                                                                      ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###############################                                                                                    ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##################################                                                                                 ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [####################################                                                                               ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##########################################                                                                         ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###########################################                                                                        ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###############################################                                                                    ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [################################################                                                                   ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###################################################                                                                ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [########################################################                                                           ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#########################################################                                                          ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##########################################################                                                         ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###########################################################                                                        ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [############################################################                                                       ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##############################################################                                                     ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###############################################################                                                    ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##################################################################                                                 ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###################################################################                                                ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#####################################################################                                              ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [######################################################################                                             ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###########################################################################                                        ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###############################################################################                                    ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [################################################################################                                   ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##################################################################################                                 ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#####################################################################################                              ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [######################################################################################                             ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#######################################################################################                            ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [########################################################################################                           ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [############################################################################################                       ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [################################################################################################                   ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [####################################################################################################               ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#######################################################################################################            ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [########################################################################################################           ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [############################################################################################################       ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#############################################################################################################      ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [##############################################################################################################     ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [###############################################################################################################    ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [################################################################################################################   ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64 [#################################################################################################################  ] 7/7  Installing : policycoreutils-python-2.5-34.el7.x86_64                                                                                                                       7/7 
  Verifying  : checkpolicy-2.5-8.el7.x86_64                                                                                                                                   1/7 
  Verifying  : libsemanage-python-2.5-14.el7.x86_64                                                                                                                           2/7 
  Verifying  : python-IPy-0.75-6.el7.noarch                                                                                                                                   3/7 
  Verifying  : policycoreutils-python-2.5-34.el7.x86_64                                                                                                                       4/7 
  Verifying  : audit-libs-python-2.8.5-4.el7.x86_64                                                                                                                           5/7 
  Verifying  : setools-libs-3.3.8-4.el7.x86_64                                                                                                                                6/7 
  Verifying  : libcgroup-0.41-21.el7.x86_64                                                                                                                                   7/7 

Installed:
  policycoreutils-python.x86_64 0:2.5-34.el7                                                                                                                                      

Dependency Installed:
  audit-libs-python.x86_64 0:2.8.5-4.el7  checkpolicy.x86_64 0:2.5-8.el7  libcgroup.x86_64 0:0.41-21.el7  libsemanage-python.x86_64 0:2.5-14.el7  python-IPy.noarch 0:0.75-6.el7 
  setools-libs.x86_64 0:3.3.8-4.el7      

Complete!
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# systemctl status nginx
[1;31m●[0m nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)
   Active: [1;31mfailed[0m (Result: exit-code) since Wed 2023-07-05 14:14:43 UTC; 1min 18s ago
  Process: 2795 ExecStartPre=/usr/sbin/nginx -t [1;31m(code=exited, status=1/FAILURE)[0m
  Process: 2794 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)

Jul 05 14:14:43 selinux systemd[1]: Starting The nginx HTTP and reverse proxy server...
Jul 05 14:14:43 selinux nginx[2795]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
Jul 05 14:14:43 selinux nginx[2795]: nginx: [emerg] bind() to 0.0.0.0:4881 failed (13: Permission denied)
Jul 05 14:14:43 selinux nginx[2795]: nginx: configuration file /etc/nginx/nginx.conf test failed
Jul 05 14:14:43 selinux systemd[1]: [1;39mnginx.service: control process exited, code=exited status=1[0m
Jul 05 14:14:43 selinux systemd[1]: [1;31mFailed to start The nginx HTTP and reverse proxy server.[0m
Jul 05 14:14:43 selinux systemd[1]: [1;39mUnit nginx.service entered failed state.[0m
Jul 05 14:14:43 selinux systemd[1]: [1;39mnginx.service failed.[0m
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# cat /var/log/nginx/au        audit/audit.log | grep 4881
type=AVC msg=audit(1688566483.213:821): avc:  denied  { name_bind } for  pid=2795 comm="nginx" src=[01;31m[K4881[m[K scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# cat /var/log/audit/audit.log | grep 4881    1688566483.213:821\
> ^C
[root@selinux ~]# cat /var/log/audit/audit.log | grep 1688566483.213:821\ 
type=AVC msg=audit([01;31m[K1688566483.213:821[m[K): avc:  denied  { name_bind } for  pid=2795 comm="nginx" src=4881 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0
type=SYSCALL msg=audit([01;31m[K1688566483.213:821[m[K): arch=c000003e syscall=49 success=no exit=-13 a0=6 a1=55da49e63878 a2=10 a3=7ffc81dfe3e0 items=0 ppid=1 pid=2795 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm="nginx" exe="/usr/sbin/nginx" subj=system_u:system_r:httpd_t:s0 key=(null)
type=PROCTITLE msg=audit([01;31m[K1688566483.213:821[m[K): proctitle=2F7573722F7362696E2F6E67696E78002D74
[root@selinux ~]# cat /var/log/audit/audit.log | grep 1688566483.213:821 | a audit2why
type=AVC msg=audit(1688566483.213:821): avc:  denied  { name_bind } for  pid=2795 comm="nginx" src=4881 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0

	Was caused by:
	The boolean nis_enabled was set incorrectly. 
	Description:
	Allow nis to enabled

	Allow access by executing:
	# setsebool -P nis_enabled 1
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# setsebool -P nis_enabled 1
[root@selinux ~]# systemctl restart nginx
[root@selinux ~]# systemctl restart nginxrestart nginx  nginx  nginx  nginx  nginx  nginx  nginx s nginxt nginxa nginxt nginxu nginxs nginx
[1;32m●[0m nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)
   Active: [1;32mactive (running)[0m since Wed 2023-07-05 14:17:09 UTC; 5s ago
  Process: 2982 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)
  Process: 2980 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)
  Process: 2979 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)
 Main PID: 2984 (nginx)
   CGroup: /system.slice/nginx.service
           ├─2984 nginx: master process /usr/sbin/nginx
           └─2985 nginx: worker process

Jul 05 14:17:09 selinux systemd[1]: Starting The nginx HTTP and reverse proxy server...
Jul 05 14:17:09 selinux nginx[2980]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
Jul 05 14:17:09 selinux nginx[2980]: nginx: configuration file /etc/nginx/nginx.conf test is successful
Jul 05 14:17:09 selinux systemd[1]: Started The nginx HTTP and reverse proxy server.
[root@selinux ~]# curl localhost:4881
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Welcome to CentOS</title>
  <style rel="stylesheet" type="text/css"> 

	html {
	background-image:url(img/html-background.png);
	background-color: white;
	font-family: "DejaVu Sans", "Liberation Sans", sans-serif;
	font-size: 0.85em;
	line-height: 1.25em;
	margin: 0 4% 0 4%;
	}

	body {
	border: 10px solid #fff;
	margin:0;
	padding:0;
	background: #fff;
	}

	/* Links */

	a:link { border-bottom: 1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
	a:active {  border-bottom:1px dotted #ccc; text-decoration: underline; color: #204d92; }
	a:visited { border-bottom:1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:visited:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
 
	.logo a:link,
	.logo a:hover,
	.logo a:visited { border-bottom: none; }

	.mainlinks a:link { border-bottom: 1px dotted #ddd; text-decoration: none; color: #eee; }
	.mainlinks a:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:active { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:visited { border-bottom:1px dotted #ddd; text-decoration: none; color: white; }
	.mainlinks a:visited:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }

	/* User interface styles */

	#header {
	margin:0;
	padding: 0.5em;
	background: #204D8C url(img/header-background.png);
	text-align: left;
	}

	.logo {
	padding: 0;
	/* For text only logo */
	font-size: 1.4em;
	line-height: 1em;
	font-weight: bold;
	}

	.logo img {
	vertical-align: middle;
	padding-right: 1em;
	}

	.logo a {
	color: #fff;
	text-decoration: none;
	}

	p {
	line-height:1.5em;
	}

	h1 { 
		margin-bottom: 0;
		line-height: 1.9em; }
	h2 { 
		margin-top: 0;
		line-height: 1.7em; }

	#content {
	clear:both;
	padding-left: 30px;
	padding-right: 30px;
	padding-bottom: 30px;
	border-bottom: 5px solid #eee;
	}

    .mainlinks {
        float: right;
        margin-top: 0.5em;
        text-align: right;
    }

    ul.mainlinks > li {
    border-right: 1px dotted #ddd;
    padding-right: 10px;
    padding-left: 10px;
    display: inline;
    list-style: none;
    }

    ul.mainlinks > li.last,
    ul.mainlinks > li.first {
    border-right: none;
    }

  </style>

</head>

<body>

<div id="header">

    <ul class="mainlinks">
        <li> <a href="http://www.centos.org/">Home</a> </li>
        <li> <a href="http://wiki.centos.org/">Wiki</a> </li>
        <li> <a href="http://wiki.centos.org/GettingHelp/ListInfo">Mailing Lists</a></li>
        <li> <a href="http://www.centos.org/download/mirrors/">Mirror List</a></li>
        <li> <a href="http://wiki.centos.org/irc">IRC</a></li>
        <li> <a href="https://www.centos.org/forums/">Forums</a></li>
        <li> <a href="http://bugs.centos.org/">Bugs</a> </li>
        <li class="last"> <a href="http://wiki.centos.org/Donate">Donate</a></li>
    </ul>

	<div class="logo">
		<a href="http://www.centos.org/"><img src="img/centos-logo.png" border="0"></a>
	</div>

</div>

<div id="content">

	<h1>Welcome to CentOS</h1>

	<h2>The Community ENTerprise Operating System</h2>

	<p><a href="http://www.centos.org/">CentOS</a> is an Enterprise-class Linux Distribution derived from sources freely provided
to the public by Red Hat, Inc. for Red Hat Enterprise Linux.  CentOS conforms fully with the upstream vendors
redistribution policy and aims to be functionally compatible. (CentOS mainly changes packages to remove upstream vendor
branding and artwork.)</p>

	<p>CentOS is developed by a small but growing team of core
developers.&nbsp; In turn the core developers are supported by an active user community
including system administrators, network administrators, enterprise users, managers, core Linux contributors and Linux enthusiasts from around the world.</p>

	<p>CentOS has numerous advantages including: an active and growing user community, quickly rebuilt, tested, and QA'ed errata packages, an extensive <a href="http://www.centos.org/download/mirrors/">mirror network</a>, developers who are contactable and responsive, Special Interest Groups (<a href="http://wiki.centos.org/SpecialInterestGroup/">SIGs</a>) to add functionality to the core CentOS distribution, and multiple community support avenues including a <a href="http://wiki.centos.org/">wiki</a>, <a
href="http://wiki.centos.org/irc">IRC Chat</a>, <a href="http://wiki.centos.org/GettingHelp/ListInfo">Email Lists</a>, <a href="https://www.centos.org/forums/">Forums</a>, <a href="http://bugs.centos.org/">Bugs Database</a>, and an <a
href="http://wiki.centos.org/FAQ/">FAQ</a>.</p>

	</div>

</div>


</body>
</html>
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# getsebool -a | grep nis_enabled
[01;31m[Knis_enabled[m[K --> on
[root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# curl localhost:4881            systemctl status nginxrestart nginx[root@selinux ~]# setsebool -P nis_enabled 1 0
[root@selinux ~]# setsebool -P nis_enabled 0[root@selinux ~]# getsebool -a | grep nis_enabled
[01;31m[Knis_enabled[m[K --> off
[root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# setsebool -P nis_enabled 0     [root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# curl localhost:4881            systemctl status nginxrestart nginx
Job for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.
[root@selinux ~]# systemctl restart nginx[root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# setsebool -P nis_enabled 0     [root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# curl localhost:4881            
curl: (7) Failed connect to localhost:4881; Connection refused
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# #   # Разреш      Разрешаем работу на порту 4881 через добавление порта в имеющийся тип
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# ыу  semanage port -l | grep hhtp
-bash: $'\321\213semanage': command not found
[root@selinux ~]# ыsemanage port -l | grep hhtp   ttp
-bash: $'\321\213semanage': command not found
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# semanage port -l | grep http
[01;31m[Khttp[m[K_cache_port_t              tcp      8080, 8118, 8123, 10001-10010
[01;31m[Khttp[m[K_cache_port_t              udp      3130
[01;31m[Khttp[m[K_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000
pegasus_[01;31m[Khttp[m[K_port_t            tcp      5988
pegasus_[01;31m[Khttp[m[Ks_port_t           tcp      5989
[root@selinux ~]# semanage port -as    a -t http_port_t -p tcp 4881
[root@selinux ~]# semanage port -a -t http_port_t -p tcp 4881l | grep http               
[01;31m[Khttp[m[K_cache_port_t              tcp      8080, 8118, 8123, 10001-10010
[01;31m[Khttp[m[K_cache_port_t              udp      3130
[01;31m[Khttp[m[K_port_t                    tcp      4881, 80, 81, 443, 488, 8008, 8009, 8443, 9000
pegasus_[01;31m[Khttp[m[K_port_t            tcp      5988
pegasus_[01;31m[Khttp[m[Ks_port_t           tcp      5989
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# semanage port -l | grep httpa -t http_port_t -p tcp 4881l | grep http               [root@selinux ~]# ыsemanage port -l | grep httphtp[root@selinux ~]# # РазРазрешаем работу на порту 4881 через добавление порта в имеющийся тип[root@selinux ~]# curl localhost:4881                                                                                                                 [root@selinux ~]# curl localhost:4881systemctl restart nginx[root@selinux ~]# getsebool -a | grep nis_enabled[root@selinux ~]# systemctl restart nginx        
[root@selinux ~]# systemctl restart nginx[root@selinux ~]# semanage port -l | grep httpa -t http_port_t -p tcp 4881l | grep http               [root@selinux ~]# ыsemanage port -l | grep httphtp[root@selinux ~]# # РазРазрешаем работу на порту 4881 через добавление порта в имеющийся тип[root@selinux ~]# curl localhost:4881                                                                                                                 [root@selinux ~]# curl localhost:4881systemctl restart nginx[root@selinux ~]# curl localhost:4881    
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Welcome to CentOS</title>
  <style rel="stylesheet" type="text/css"> 

	html {
	background-image:url(img/html-background.png);
	background-color: white;
	font-family: "DejaVu Sans", "Liberation Sans", sans-serif;
	font-size: 0.85em;
	line-height: 1.25em;
	margin: 0 4% 0 4%;
	}

	body {
	border: 10px solid #fff;
	margin:0;
	padding:0;
	background: #fff;
	}

	/* Links */

	a:link { border-bottom: 1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
	a:active {  border-bottom:1px dotted #ccc; text-decoration: underline; color: #204d92; }
	a:visited { border-bottom:1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:visited:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
 
	.logo a:link,
	.logo a:hover,
	.logo a:visited { border-bottom: none; }

	.mainlinks a:link { border-bottom: 1px dotted #ddd; text-decoration: none; color: #eee; }
	.mainlinks a:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:active { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:visited { border-bottom:1px dotted #ddd; text-decoration: none; color: white; }
	.mainlinks a:visited:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }

	/* User interface styles */

	#header {
	margin:0;
	padding: 0.5em;
	background: #204D8C url(img/header-background.png);
	text-align: left;
	}

	.logo {
	padding: 0;
	/* For text only logo */
	font-size: 1.4em;
	line-height: 1em;
	font-weight: bold;
	}

	.logo img {
	vertical-align: middle;
	padding-right: 1em;
	}

	.logo a {
	color: #fff;
	text-decoration: none;
	}

	p {
	line-height:1.5em;
	}

	h1 { 
		margin-bottom: 0;
		line-height: 1.9em; }
	h2 { 
		margin-top: 0;
		line-height: 1.7em; }

	#content {
	clear:both;
	padding-left: 30px;
	padding-right: 30px;
	padding-bottom: 30px;
	border-bottom: 5px solid #eee;
	}

    .mainlinks {
        float: right;
        margin-top: 0.5em;
        text-align: right;
    }

    ul.mainlinks > li {
    border-right: 1px dotted #ddd;
    padding-right: 10px;
    padding-left: 10px;
    display: inline;
    list-style: none;
    }

    ul.mainlinks > li.last,
    ul.mainlinks > li.first {
    border-right: none;
    }

  </style>

</head>

<body>

<div id="header">

    <ul class="mainlinks">
        <li> <a href="http://www.centos.org/">Home</a> </li>
        <li> <a href="http://wiki.centos.org/">Wiki</a> </li>
        <li> <a href="http://wiki.centos.org/GettingHelp/ListInfo">Mailing Lists</a></li>
        <li> <a href="http://www.centos.org/download/mirrors/">Mirror List</a></li>
        <li> <a href="http://wiki.centos.org/irc">IRC</a></li>
        <li> <a href="https://www.centos.org/forums/">Forums</a></li>
        <li> <a href="http://bugs.centos.org/">Bugs</a> </li>
        <li class="last"> <a href="http://wiki.centos.org/Donate">Donate</a></li>
    </ul>

	<div class="logo">
		<a href="http://www.centos.org/"><img src="img/centos-logo.png" border="0"></a>
	</div>

</div>

<div id="content">

	<h1>Welcome to CentOS</h1>

	<h2>The Community ENTerprise Operating System</h2>

	<p><a href="http://www.centos.org/">CentOS</a> is an Enterprise-class Linux Distribution derived from sources freely provided
to the public by Red Hat, Inc. for Red Hat Enterprise Linux.  CentOS conforms fully with the upstream vendors
redistribution policy and aims to be functionally compatible. (CentOS mainly changes packages to remove upstream vendor
branding and artwork.)</p>

	<p>CentOS is developed by a small but growing team of core
developers.&nbsp; In turn the core developers are supported by an active user community
including system administrators, network administrators, enterprise users, managers, core Linux contributors and Linux enthusiasts from around the world.</p>

	<p>CentOS has numerous advantages including: an active and growing user community, quickly rebuilt, tested, and QA'ed errata packages, an extensive <a href="http://www.centos.org/download/mirrors/">mirror network</a>, developers who are contactable and responsive, Special Interest Groups (<a href="http://wiki.centos.org/SpecialInterestGroup/">SIGs</a>) to add functionality to the core CentOS distribution, and multiple community support avenues including a <a href="http://wiki.centos.org/">wiki</a>, <a
href="http://wiki.centos.org/irc">IRC Chat</a>, <a href="http://wiki.centos.org/GettingHelp/ListInfo">Email Lists</a>, <a href="https://www.centos.org/forums/">Forums</a>, <a href="http://bugs.centos.org/">Bugs Database</a>, and an <a
href="http://wiki.centos.org/FAQ/">FAQ</a>.</p>

	</div>

</div>


</body>
</html>
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# curl localhost:4881systemctl restart nginx[root@selinux ~]# semanage port -l | grep httpa -t http_port_t -p tcp 4881[root@selinux ~]# semanage port -a -t http_port_t -p tcp 4881 d -t http_port_t -p tcp 4881
[root@selinux ~]# semanage port -d -t http_port_t -p tcp 4881[root@selinux ~]# curl localhost:4881                        systemctl restart nginx[root@selinux ~]# semanage port -l | grep http
[01;31m[Khttp[m[K_cache_port_t              tcp      8080, 8118, 8123, 10001-10010
[01;31m[Khttp[m[K_cache_port_t              udp      3130
[01;31m[Khttp[m[K_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000
pegasus_[01;31m[Khttp[m[K_port_t            tcp      5988
pegasus_[01;31m[Khttp[m[Ks_port_t           tcp      5989
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# semanage port -l | grep httpd -t http_port_t -p tcp 4881[root@selinux ~]# curl localhost:4881                        systemctl restart nginx
Job for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.
[root@selinux ~]# systemctl restart nginx[root@selinux ~]# semanage port -l | grep httpd -t http_port_t -p tcp 4881[root@selinux ~]# curl localhost:4881                        
curl: (7) Failed connect to localhost:4881; Connection refused
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# # Разрешаем работу на порту 4881 с помощью модуля SELinux
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# grep nginx /var/log/audit/audit.log |  
type=SOFTWARE_UPDATE msg=audit(1688566482.949:819): pid=2659 uid=0 auid=1000 ses=2 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 msg='sw="[01;31m[Knginx[m[K-filesystem-1:1.20.1-10.el7.noarch" sw_type=rpm key_enforce=0 gpg_res=1 root_dir="/" comm="yum" exe="/usr/bin/python2.7" hostname=? addr=? terminal=? res=success'
type=SOFTWARE_UPDATE msg=audit(1688566483.081:820): pid=2659 uid=0 auid=1000 ses=2 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 msg='sw="[01;31m[Knginx[m[K-1:1.20.1-10.el7.x86_64" sw_type=rpm key_enforce=0 gpg_res=1 root_dir="/" comm="yum" exe="/usr/bin/python2.7" hostname=? addr=? terminal=? res=success'
type=AVC msg=audit(1688566483.213:821): avc:  denied  { name_bind } for  pid=2795 comm="[01;31m[Knginx[m[K" src=4881 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0
type=SYSCALL msg=audit(1688566483.213:821): arch=c000003e syscall=49 success=no exit=-13 a0=6 a1=55da49e63878 a2=10 a3=7ffc81dfe3e0 items=0 ppid=1 pid=2795 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm="[01;31m[Knginx[m[K" exe="/usr/sbin/[01;31m[Knginx[m[K" subj=system_u:system_r:httpd_t:s0 key=(null)
type=SERVICE_START msg=audit(1688566483.216:822): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=failed'
type=SERVICE_START msg=audit(1688566629.636:877): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
type=SERVICE_STOP msg=audit(1688566681.805:882): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
type=AVC msg=audit(1688566681.821:883): avc:  denied  { name_bind } for  pid=3009 comm="[01;31m[Knginx[m[K" src=4881 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0
type=SYSCALL msg=audit(1688566681.821:883): arch=c000003e syscall=49 success=no exit=-13 a0=6 a1=5602e6d05878 a2=10 a3=7ffc28f64710 items=0 ppid=1 pid=3009 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm="[01;31m[Knginx[m[K" exe="/usr/sbin/[01;31m[Knginx[m[K" subj=system_u:system_r:httpd_t:s0 key=(null)
type=SERVICE_START msg=audit(1688566681.822:884): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=failed'
type=SERVICE_START msg=audit(1688566781.735:888): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
type=SERVICE_STOP msg=audit(1688566812.306:892): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
type=AVC msg=audit(1688566812.325:893): avc:  denied  { name_bind } for  pid=3071 comm="[01;31m[Knginx[m[K" src=4881 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket permissive=0
type=SYSCALL msg=audit(1688566812.325:893): arch=c000003e syscall=49 success=no exit=-13 a0=6 a1=56106085f878 a2=10 a3=7ffe6dc3dee0 items=0 ppid=1 pid=3071 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm="[01;31m[Knginx[m[K" exe="/usr/sbin/[01;31m[Knginx[m[K" subj=system_u:system_r:httpd_t:s0 key=(null)
type=SERVICE_START msg=audit(1688566812.327:894): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='unit=[01;31m[Knginx[m[K comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=failed'
[root@selinux ~]# grep nginx /var/log/audit/audit.log | audit2allow -M nginx
******************** IMPORTANT ***********************
To make this policy package active, execute:

semodule -i nginx.pp

[root@selinux ~]# ll
total 24
-rw-------. 1 root root 5570 Apr 30  2020 anaconda-ks.cfg
-rw-r--r--. 1 root root  960 Jul  5 14:21 nginx.pp
-rw-r--r--. 1 root root  257 Jul  5 14:21 nginx.te
-rw-------. 1 root root 5300 Apr 30  2020 original-ks.cfg
[root@selinux ~]# semodule -i nginx.pp
[root@selinux ~]# semdouel     odule -l | grep nginx
[01;31m[Knginx[m[K	1.0
[root@selinux ~]# systemctl start nginx
[root@selinux ~]# systemctl start nginxemodule -l | grep nginxi nginx.pp    [root@selinux ~]# ll                  grep nginx /var/log/audit/audit.log | audit2allow -M nginx                       [root@selinux ~]# # Разрешаем работу на порту 4881 с помощью модуля SELinux[root@selinux ~]# curl localhost:4881                                                                          [root@selinux ~]# curl localhost:4881
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Welcome to CentOS</title>
  <style rel="stylesheet" type="text/css"> 

	html {
	background-image:url(img/html-background.png);
	background-color: white;
	font-family: "DejaVu Sans", "Liberation Sans", sans-serif;
	font-size: 0.85em;
	line-height: 1.25em;
	margin: 0 4% 0 4%;
	}

	body {
	border: 10px solid #fff;
	margin:0;
	padding:0;
	background: #fff;
	}

	/* Links */

	a:link { border-bottom: 1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
	a:active {  border-bottom:1px dotted #ccc; text-decoration: underline; color: #204d92; }
	a:visited { border-bottom:1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:visited:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
 
	.logo a:link,
	.logo a:hover,
	.logo a:visited { border-bottom: none; }

	.mainlinks a:link { border-bottom: 1px dotted #ddd; text-decoration: none; color: #eee; }
	.mainlinks a:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:active { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:visited { border-bottom:1px dotted #ddd; text-decoration: none; color: white; }
	.mainlinks a:visited:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }

	/* User interface styles */

	#header {
	margin:0;
	padding: 0.5em;
	background: #204D8C url(img/header-background.png);
	text-align: left;
	}

	.logo {
	padding: 0;
	/* For text only logo */
	font-size: 1.4em;
	line-height: 1em;
	font-weight: bold;
	}

	.logo img {
	vertical-align: middle;
	padding-right: 1em;
	}

	.logo a {
	color: #fff;
	text-decoration: none;
	}

	p {
	line-height:1.5em;
	}

	h1 { 
		margin-bottom: 0;
		line-height: 1.9em; }
	h2 { 
		margin-top: 0;
		line-height: 1.7em; }

	#content {
	clear:both;
	padding-left: 30px;
	padding-right: 30px;
	padding-bottom: 30px;
	border-bottom: 5px solid #eee;
	}

    .mainlinks {
        float: right;
        margin-top: 0.5em;
        text-align: right;
    }

    ul.mainlinks > li {
    border-right: 1px dotted #ddd;
    padding-right: 10px;
    padding-left: 10px;
    display: inline;
    list-style: none;
    }

    ul.mainlinks > li.last,
    ul.mainlinks > li.first {
    border-right: none;
    }

  </style>

</head>

<body>

<div id="header">

    <ul class="mainlinks">
        <li> <a href="http://www.centos.org/">Home</a> </li>
        <li> <a href="http://wiki.centos.org/">Wiki</a> </li>
        <li> <a href="http://wiki.centos.org/GettingHelp/ListInfo">Mailing Lists</a></li>
        <li> <a href="http://www.centos.org/download/mirrors/">Mirror List</a></li>
        <li> <a href="http://wiki.centos.org/irc">IRC</a></li>
        <li> <a href="https://www.centos.org/forums/">Forums</a></li>
        <li> <a href="http://bugs.centos.org/">Bugs</a> </li>
        <li class="last"> <a href="http://wiki.centos.org/Donate">Donate</a></li>
    </ul>

	<div class="logo">
		<a href="http://www.centos.org/"><img src="img/centos-logo.png" border="0"></a>
	</div>

</div>

<div id="content">

	<h1>Welcome to CentOS</h1>

	<h2>The Community ENTerprise Operating System</h2>

	<p><a href="http://www.centos.org/">CentOS</a> is an Enterprise-class Linux Distribution derived from sources freely provided
to the public by Red Hat, Inc. for Red Hat Enterprise Linux.  CentOS conforms fully with the upstream vendors
redistribution policy and aims to be functionally compatible. (CentOS mainly changes packages to remove upstream vendor
branding and artwork.)</p>

	<p>CentOS is developed by a small but growing team of core
developers.&nbsp; In turn the core developers are supported by an active user community
including system administrators, network administrators, enterprise users, managers, core Linux contributors and Linux enthusiasts from around the world.</p>

	<p>CentOS has numerous advantages including: an active and growing user community, quickly rebuilt, tested, and QA'ed errata packages, an extensive <a href="http://www.centos.org/download/mirrors/">mirror network</a>, developers who are contactable and responsive, Special Interest Groups (<a href="http://wiki.centos.org/SpecialInterestGroup/">SIGs</a>) to add functionality to the core CentOS distribution, and multiple community support avenues including a <a href="http://wiki.centos.org/">wiki</a>, <a
href="http://wiki.centos.org/irc">IRC Chat</a>, <a href="http://wiki.centos.org/GettingHelp/ListInfo">Email Lists</a>, <a href="https://www.centos.org/forums/">Forums</a>, <a href="http://bugs.centos.org/">Bugs Database</a>, and an <a
href="http://wiki.centos.org/FAQ/">FAQ</a>.</p>

	</div>

</div>


</body>
</html>
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# semodule -r nginx
libsemanage.semanage_direct_remove_key: Removing last nginx module (no other nginx module exists at another priority).
[root@selinux ~]# semodule -r nginxcurl localhost:4881
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Welcome to CentOS</title>
  <style rel="stylesheet" type="text/css"> 

	html {
	background-image:url(img/html-background.png);
	background-color: white;
	font-family: "DejaVu Sans", "Liberation Sans", sans-serif;
	font-size: 0.85em;
	line-height: 1.25em;
	margin: 0 4% 0 4%;
	}

	body {
	border: 10px solid #fff;
	margin:0;
	padding:0;
	background: #fff;
	}

	/* Links */

	a:link { border-bottom: 1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
	a:active {  border-bottom:1px dotted #ccc; text-decoration: underline; color: #204d92; }
	a:visited { border-bottom:1px dotted #ccc; text-decoration: none; color: #204d92; }
	a:visited:hover { border-bottom:1px dotted #ccc; text-decoration: underline; color: green; }
 
	.logo a:link,
	.logo a:hover,
	.logo a:visited { border-bottom: none; }

	.mainlinks a:link { border-bottom: 1px dotted #ddd; text-decoration: none; color: #eee; }
	.mainlinks a:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:active { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }
	.mainlinks a:visited { border-bottom:1px dotted #ddd; text-decoration: none; color: white; }
	.mainlinks a:visited:hover { border-bottom:1px dotted #ddd; text-decoration: underline; color: white; }

	/* User interface styles */

	#header {
	margin:0;
	padding: 0.5em;
	background: #204D8C url(img/header-background.png);
	text-align: left;
	}

	.logo {
	padding: 0;
	/* For text only logo */
	font-size: 1.4em;
	line-height: 1em;
	font-weight: bold;
	}

	.logo img {
	vertical-align: middle;
	padding-right: 1em;
	}

	.logo a {
	color: #fff;
	text-decoration: none;
	}

	p {
	line-height:1.5em;
	}

	h1 { 
		margin-bottom: 0;
		line-height: 1.9em; }
	h2 { 
		margin-top: 0;
		line-height: 1.7em; }

	#content {
	clear:both;
	padding-left: 30px;
	padding-right: 30px;
	padding-bottom: 30px;
	border-bottom: 5px solid #eee;
	}

    .mainlinks {
        float: right;
        margin-top: 0.5em;
        text-align: right;
    }

    ul.mainlinks > li {
    border-right: 1px dotted #ddd;
    padding-right: 10px;
    padding-left: 10px;
    display: inline;
    list-style: none;
    }

    ul.mainlinks > li.last,
    ul.mainlinks > li.first {
    border-right: none;
    }

  </style>

</head>

<body>

<div id="header">

    <ul class="mainlinks">
        <li> <a href="http://www.centos.org/">Home</a> </li>
        <li> <a href="http://wiki.centos.org/">Wiki</a> </li>
        <li> <a href="http://wiki.centos.org/GettingHelp/ListInfo">Mailing Lists</a></li>
        <li> <a href="http://www.centos.org/download/mirrors/">Mirror List</a></li>
        <li> <a href="http://wiki.centos.org/irc">IRC</a></li>
        <li> <a href="https://www.centos.org/forums/">Forums</a></li>
        <li> <a href="http://bugs.centos.org/">Bugs</a> </li>
        <li class="last"> <a href="http://wiki.centos.org/Donate">Donate</a></li>
    </ul>

	<div class="logo">
		<a href="http://www.centos.org/"><img src="img/centos-logo.png" border="0"></a>
	</div>

</div>

<div id="content">

	<h1>Welcome to CentOS</h1>

	<h2>The Community ENTerprise Operating System</h2>

	<p><a href="http://www.centos.org/">CentOS</a> is an Enterprise-class Linux Distribution derived from sources freely provided
to the public by Red Hat, Inc. for Red Hat Enterprise Linux.  CentOS conforms fully with the upstream vendors
redistribution policy and aims to be functionally compatible. (CentOS mainly changes packages to remove upstream vendor
branding and artwork.)</p>

	<p>CentOS is developed by a small but growing team of core
developers.&nbsp; In turn the core developers are supported by an active user community
including system administrators, network administrators, enterprise users, managers, core Linux contributors and Linux enthusiasts from around the world.</p>

	<p>CentOS has numerous advantages including: an active and growing user community, quickly rebuilt, tested, and QA'ed errata packages, an extensive <a href="http://www.centos.org/download/mirrors/">mirror network</a>, developers who are contactable and responsive, Special Interest Groups (<a href="http://wiki.centos.org/SpecialInterestGroup/">SIGs</a>) to add functionality to the core CentOS distribution, and multiple community support avenues including a <a href="http://wiki.centos.org/">wiki</a>, <a
href="http://wiki.centos.org/irc">IRC Chat</a>, <a href="http://wiki.centos.org/GettingHelp/ListInfo">Email Lists</a>, <a href="https://www.centos.org/forums/">Forums</a>, <a href="http://bugs.centos.org/">Bugs Database</a>, and an <a
href="http://wiki.centos.org/FAQ/">FAQ</a>.</p>

	</div>

</div>


</body>
</html>
[root@selinux ~]# curl localhost:4881semodule -r nginx  curl localhost:4881systemctl start nginxsystemctl startrstart nginxestart nginx
Job for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.
[root@selinux ~]# systemctl restart nginx[root@selinux ~]# curl localhost:4881    
curl: (7) Failed connect to localhost:4881; Connection refused
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# 
[root@selinux ~]# logout
[vagrant@selinux ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/17[00m$ [?2004l
exit

Script done on 2023-07-05 17:22:38+03:00 [COMMAND_EXIT_CODE="7"]
