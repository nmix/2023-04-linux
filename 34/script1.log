Script started on 2023-09-21 17:11:20+03:00 [TERM="tmux-256color" TTY="/dev/pts/2" COLUMNS="211" LINES="56"]
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ 
[?2004l[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ vagrant ssh client[Kvagrant up
[?2004l[0mBringing machine 'server' up with 'virtualbox' provider...[0m
[0mBringing machine 'client' up with 'virtualbox' provider...[0m
[1m==> server: Importing base box 'messyzone/centos-stream8'...[0m
[0m[K[0m[0mProgress: 10%[0m[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 30%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 80%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> server: Matching MAC address for NAT networking...[0m
[1m==> server: Checking if box 'messyzone/centos-stream8' version '2021.06.1623491636' is up to date...[0m
[1m==> server: Setting the name of the VM: 34_server_1695305502754_10222[0m
[1m==> server: Clearing any previously set network interfaces...[0m
[1m==> server: Preparing network interfaces based on configuration...[0m
[0m    server: Adapter 1: nat[0m
[0m    server: Adapter 2: hostonly[0m
[1m==> server: Forwarding ports...[0m
[0m    server: 22 (guest) => 2222 (host) (adapter 1)[0m
[1m==> server: Booting VM...[0m
[1m==> server: Waiting for machine to boot. This may take a few minutes...[0m
[0m    server: SSH address: 127.0.0.1:2222[0m
[0m    server: SSH username: vagrant[0m
[0m    server: SSH auth method: private key[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: Warning: Remote connection disconnect. Retrying...[0m
[0m    server: 
    server: Vagrant insecure key detected. Vagrant will automatically replace
    server: this with a newly generated keypair for better security.[0m
[0m    server: 
    server: Inserting generated public key within guest...[0m
[0m    server: Removing insecure key from the guest if it's present...[0m
[0m    server: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> server: Machine booted and ready![0m
[1m==> server: Checking for guest additions in VM...[0m
[0m    server: The guest additions on this VM do not match the installed version of
    server: VirtualBox! In most cases this is fine, but in rare cases it can
    server: prevent things such as shared folders from working properly. If you see
    server: shared folder errors, please make sure the guest additions within the
    server: virtual machine match the version of VirtualBox you have installed on
    server: your host and reload your VM.
    server: 
    server: Guest Additions Version: 6.1.22
    server: VirtualBox Version: 7.0[0m
[1m==> server: Setting hostname...[0m
[1m==> server: Configuring and enabling network interfaces...[0m
[1m==> server: Mounting shared folders...[0m
[0m    server: /vagrant => /home/zoid/projects/otus/2023-04-linux/34[0m
[1m==> server: Running provisioner: ansible...[0m
[0m    server: Running ansible-playbook...[0m
[0m
PLAY [OpenVPN config] **********************************************************
[0m[0m
TASK [Gathering Facts] *********************************************************
[0m[0m[0;32mok: [server][0m
[0m[0m
TASK [Install epel-release] ****************************************************
[0m[0m[0;32mok: [server][0m
[0m[0m
TASK [Install packages] ********************************************************
[0m[0m[0;33mchanged: [server][0m
[0m[0m
TASK [Disable SELinux] *********************************************************
[0m[0m[1;35m[WARNING]: SELinux state change will take effect next reboot[0m
[0m[0m[0;33mchanged: [server][0m
[0m[0m
TASK [Copy key file] ***********************************************************
[0m[0m[0;33mchanged: [server][0m
[0m[0m
TASK [Copy openvpn conf] *******************************************************
[0m[0m[0;33mchanged: [server][0m
[0m[0m
TASK [Copy openvpn service unit] ***********************************************
[0m[0m[0;33mchanged: [server][0m
[0m[0m
TASK [Start openvpn] ***********************************************************
[0m[0m[0;33mchanged: [server][0m
[0m[0m
PLAY RECAP *********************************************************************
[0m[0m[0;33mserver[0m                     : [0;32mok=8   [0m [0;33mchanged=6   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[0m[1m==> client: Importing base box 'messyzone/centos-stream8'...[0m
[0m[K[0m[0mProgress: 10%[0m[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 30%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 80%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> client: Matching MAC address for NAT networking...[0m
[1m==> client: Checking if box 'messyzone/centos-stream8' version '2021.06.1623491636' is up to date...[0m
[1m==> client: Setting the name of the VM: 34_client_1695305678200_22469[0m
[1m==> client: Fixed port collision for 22 => 2222. Now on port 2200.[0m
[1m==> client: Clearing any previously set network interfaces...[0m
[1m==> client: Preparing network interfaces based on configuration...[0m
[0m    client: Adapter 1: nat[0m
[0m    client: Adapter 2: hostonly[0m
[1m==> client: Forwarding ports...[0m
[0m    client: 22 (guest) => 2200 (host) (adapter 1)[0m
[1m==> client: Booting VM...[0m
[1m==> client: Waiting for machine to boot. This may take a few minutes...[0m
[0m    client: SSH address: 127.0.0.1:2200[0m
[0m    client: SSH username: vagrant[0m
[0m    client: SSH auth method: private key[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: Warning: Remote connection disconnect. Retrying...[0m
[0m    client: 
    client: Vagrant insecure key detected. Vagrant will automatically replace
    client: this with a newly generated keypair for better security.[0m
[0m    client: 
    client: Inserting generated public key within guest...[0m
[0m    client: Removing insecure key from the guest if it's present...[0m
[0m    client: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> client: Machine booted and ready![0m
[1m==> client: Checking for guest additions in VM...[0m
[0m    client: The guest additions on this VM do not match the installed version of
    client: VirtualBox! In most cases this is fine, but in rare cases it can
    client: prevent things such as shared folders from working properly. If you see
    client: shared folder errors, please make sure the guest additions within the
    client: virtual machine match the version of VirtualBox you have installed on
    client: your host and reload your VM.
    client: 
    client: Guest Additions Version: 6.1.22
    client: VirtualBox Version: 7.0[0m
[1m==> client: Setting hostname...[0m
[1m==> client: Configuring and enabling network interfaces...[0m
[1m==> client: Mounting shared folders...[0m
[0m    client: /vagrant => /home/zoid/projects/otus/2023-04-linux/34[0m
[1m==> client: Running provisioner: ansible...[0m
[0m    client: Running ansible-playbook...[0m
[0m
PLAY [OpenVPN config] **********************************************************
[0m[0m
TASK [Gathering Facts] *********************************************************
[0m[0m[0;32mok: [client][0m
[0m[0m
TASK [Install epel-release] ****************************************************
[0m[0m[0;32mok: [client][0m
[0m[0m
TASK [Install packages] ********************************************************
[0m[0m[0;33mchanged: [client][0m
[0m[0m
TASK [Disable SELinux] *********************************************************
[0m[0m[1;35m[WARNING]: SELinux state change will take effect next reboot[0m
[0m[0m[0;33mchanged: [client][0m
[0m[0m
TASK [Copy key file] ***********************************************************
[0m[0m[0;33mchanged: [client][0m
[0m[0m
TASK [Copy openvpn conf] *******************************************************
[0m[0m[0;33mchanged: [client][0m
[0m[0m
TASK [Copy openvpn service unit] ***********************************************
[0m[0m[0;33mchanged: [client][0m
[0m[0m
TASK [Start openvpn] ***********************************************************
[0m[0m[0;33mchanged: [client][0m
[0m[0m
PLAY RECAP *********************************************************************
[0;33mclient[0m                     : [0;32mok=8   [0m [0;33mchanged=6   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[0m[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ vagrant ssh server
[?2004lActivate the web console with: systemctl enable --now cockpit.socket

Last login: Thu Sep 21 14:14:25 2023 from 10.0.2.2
[vagrant@server ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:9a:89:43 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic noprefixroute enp0s3
       valid_lft 86093sec preferred_lft 86093sec
    inet6 fe80::a00:27ff:fe9a:8943/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: enp0s8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:4e:67:dc brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.10/24 brd 192.168.56.255 scope global noprefixroute enp0s8
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe4e:67dc/64 scope link 
       valid_lft forever preferred_lft forever
4: tap0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/ether ea:5b:8a:51:39:7b brd ff:ff:ff:ff:ff:ff
    inet 10.10.10.1/24 brd 10.10.10.255 scope global tap0
       valid_lft forever preferred_lft forever
    inet6 fe80::e85b:8aff:fe51:397b/64 scope link 
       valid_lft forever preferred_lft forever
[vagrant@server ~]$ 
[vagrant@server ~]$ 
[vagrant@server ~]$ 
[vagrant@server ~]$ iperf3 -sD
[vagrant@server ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ vagrant ssh server[K[K[K[K[K[Kclient
[?2004lActivate the web console with: systemctl enable --now cockpit.socket

Last login: Thu Sep 21 14:17:05 2023 from 10.0.2.2
[vagrant@client ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:9a:89:43 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic noprefixroute enp0s3
       valid_lft 86249sec preferred_lft 86249sec
    inet6 fe80::a00:27ff:fe9a:8943/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: enp0s8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:36:89:1a brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.20/24 brd 192.168.56.255 scope global noprefixroute enp0s8
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe36:891a/64 scope link 
       valid_lft forever preferred_lft forever
4: tap0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/ether 6a:24:07:84:4b:b5 brd ff:ff:ff:ff:ff:ff
    inet 10.10.10.2/24 brd 10.10.10.255 scope global tap0
       valid_lft forever preferred_lft forever
    inet6 fe80::6824:7ff:fe84:4bb5/64 scope link 
       valid_lft forever preferred_lft forever
[vagrant@client ~]$ iperf3 -c 10.10.10.1 -t 40 -i 5
Connecting to host 10.10.10.1, port 5201
[  5] local 10.10.10.2 port 48456 connected to 10.10.10.1 port 5201
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-5.00   sec   148 MBytes   248 Mbits/sec  144   91.6 KBytes       
[  5]   5.00-10.00  sec   116 MBytes   195 Mbits/sec  213    270 KBytes       
[  5]  10.00-15.00  sec   106 MBytes   178 Mbits/sec  318    116 KBytes       
[  5]  15.00-20.00  sec   116 MBytes   194 Mbits/sec  314    178 KBytes       
[  5]  20.00-25.00  sec   115 MBytes   193 Mbits/sec  320    143 KBytes       
[  5]  25.00-30.00  sec   115 MBytes   194 Mbits/sec  174    148 KBytes       
[  5]  30.00-35.00  sec   116 MBytes   194 Mbits/sec  338   91.6 KBytes       
[  5]  35.00-40.00  sec   169 MBytes   284 Mbits/sec  107   92.9 KBytes       
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-40.00  sec  1002 MBytes   210 Mbits/sec  1928             sender
[  5]   0.00-40.08  sec  1001 MBytes   209 Mbits/sec                  receiver

iperf Done.
[vagrant@client ~]$ sudo vim /etc/openvpn/server.conf
[?1049h[?1h=[1;56r[27m[24m[23m[0m[H[J[?25l[56;1H"/etc/openvpn/server.conf" 10L, 219C[1;1Hdev tap
remote 192.168.56.10
ifconfig 10.10.10.2 255.255.255.0
topology subnet
route 192.168.56.0 255.255.255.0
secret /etc/openvpn/static.key
comp-lzo
status /var/log/openvpn-status.log
log /var/log/openvpn.log
verb 3
[94m~                                                                                                                                                                                                                  [12;1H~                                                                                                                                                                                                                  [13;1H~                                                                                                                                                                                                                  [14;1H~                                                                                                                                                                                                                  [15;1H~                                                                                                                                                                                                                  [16;1H~                                                                                                                                                                                                                  [17;1H~                                                                                                                                                                                                                  [18;1H~                                                                                                                                                                                                                  [19;1H~                                                                                                                                                                                                                  [20;1H~                                                                                                                                                                                                                  [21;1H~                                                                                                                                                                                                                  [22;1H~                                                                                                                                                                                                                  [23;1H~                                                                                                                                                                                                                  [24;1H~                                                                                                                                                                                                                  [25;1H~                                                                                                                                                                                                                  [26;1H~                                                                                                                                                                                                                  [27;1H~                                                                                                                                                                                                                  [28;1H~                                                                                                                                                                                                                  [29;1H~                                                                                                                                                                                                                  [30;1H~                                                                                                                                                                                                                  [31;1H~                                                                                                                                                                                                                  [32;1H~                                                                                                                                                                                                                  [33;1H~                                                                                                                                                                                                                  [34;1H~                                                                                                                                                                                                                  [35;1H~                                                                                                                                                                                                                  [36;1H~                                                                                                                                                                                                                  [37;1H~                                                                                                                                                                                                                  [38;1H~                                                                                                                                                                                                                  [39;1H~                                                                                                                                                                                                                  [40;1H~                                                                                                                                                                                                                  [41;1H~                                                                                                                                                                                                                  [42;1H~                                                                                                                                                                                                                  [43;1H~                                                                                                                                                                                                                  [44;1H~                                                                                                                                                                                                                  [45;1H~                                                                                                                                                                                                                  [46;1H~                                                                                                                                                                                                                  [47;1H~                                                                                                                                                                                                                  [48;1H~                                                                                                                                                                                                                  [49;1H~                                                                                                                                                                                                                  [50;1H~                                                                                                                                                                                                                  [51;1H~                                                                                                                                                                                                                  [52;1H~                                                                                                                                                                                                                  [53;1H~                                                                                                                                                                                                                  [54;1H~                                                                                                                                                                                                                  [55;1H~                                                                                                                                                                                                                  [0m[56;194H1,1[11CAll[1;1H[34h[?25h[?25l[56;184H~@@[1;1H[56;184H   [1;7H[56;196H7[1;7H[34h[?25h[?25l[56;184Ha[1;7H[56;184H [1;8H[56;1H[1m-- INSERT --[0m[56;13H[K[56;194H1,8[11CAll[1;8H[34h[?25h[?25l[1;7H[K[56;196H7[1;7H[34h[?25h[?25l[1;6H[K[56;196H6[1;6H[34h[?25h[?25l[1;5H[K[56;196H5[1;5H[34h[?25h[?25lt[56;196H6[1;6H[34h[?25h[?25lu[56;196H7[1;7H[34h[?25h[?25ln[56;196H8[1;8H[34h[?25h[56;1H[K[?25l[56;194H1,7[11CAll[1;7H[34h[?25h[?25l[56;184H:[1;7H[56;184H[K[56;1H:[34h[?25hw[?25l"/etc/openvpn/server.conf" 10L, 219C written[1;7H[56;194H1,7[11CAll[56;194H[K[56;194H1,7[11CAll[1;7H[34h[?25h[?25l[56;184H:[1;7H[56;1H[K[56;1H:[34h[?25hq[?25l[56;1H[K[56;1H[?1l>[34h[?25h[?1049l[vagrant@client ~]$ sudo systemctl restart openvpn@server.service [K[K[K[K[K[K[K[K[K
[vagrant@client ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:9a:89:43 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic noprefixroute enp0s3
       valid_lft 86118sec preferred_lft 86118sec
    inet6 fe80::a00:27ff:fe9a:8943/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: enp0s8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:36:89:1a brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.20/24 brd 192.168.56.255 scope global noprefixroute enp0s8
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe36:891a/64 scope link 
       valid_lft forever preferred_lft forever
5: tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/none 
    inet 10.10.10.2/24 brd 10.10.10.255 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::f285:8799:d3f:942a/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
[vagrant@client ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ vagrant ssh client[K[K[K[K[K[Kserver
[?2004lActivate the web console with: systemctl enable --now cockpit.socket

Last login: Thu Sep 21 14:18:15 2023 from 10.0.2.2
[vagrant@server ~]$ sudo vim /etc/openvpn/server.conf
[?1049h[?1h=[1;56r[27m[24m[23m[0m[H[J[?25l[56;1H"/etc/openvpn/server.conf" 8L, 165C[1;1Hdev tap
ifconfig 10.10.10.1 255.255.255.0
topology subnet
secret /etc/openvpn/static.key
comp-lzo
status /var/log/openvpn-status.log
log /var/log/openvpn.log
verb 3
[94m~                                                                                                                                                                                                                  [10;1H~                                                                                                                                                                                                                  [11;1H~                                                                                                                                                                                                                  [12;1H~                                                                                                                                                                                                                  [13;1H~                                                                                                                                                                                                                  [14;1H~                                                                                                                                                                                                                  [15;1H~                                                                                                                                                                                                                  [16;1H~                                                                                                                                                                                                                  [17;1H~                                                                                                                                                                                                                  [18;1H~                                                                                                                                                                                                                  [19;1H~                                                                                                                                                                                                                  [20;1H~                                                                                                                                                                                                                  [21;1H~                                                                                                                                                                                                                  [22;1H~                                                                                                                                                                                                                  [23;1H~                                                                                                                                                                                                                  [24;1H~                                                                                                                                                                                                                  [25;1H~                                                                                                                                                                                                                  [26;1H~                                                                                                                                                                                                                  [27;1H~                                                                                                                                                                                                                  [28;1H~                                                                                                                                                                                                                  [29;1H~                                                                                                                                                                                                                  [30;1H~                                                                                                                                                                                                                  [31;1H~                                                                                                                                                                                                                  [32;1H~                                                                                                                                                                                                                  [33;1H~                                                                                                                                                                                                                  [34;1H~                                                                                                                                                                                                                  [35;1H~                                                                                                                                                                                                                  [36;1H~                                                                                                                                                                                                                  [37;1H~                                                                                                                                                                                                                  [38;1H~                                                                                                                                                                                                                  [39;1H~                                                                                                                                                                                                                  [40;1H~                                                                                                                                                                                                                  [41;1H~                                                                                                                                                                                                                  [42;1H~                                                                                                                                                                                                                  [43;1H~                                                                                                                                                                                                                  [44;1H~                                                                                                                                                                                                                  [45;1H~                                                                                                                                                                                                                  [46;1H~                                                                                                                                                                                                                  [47;1H~                                                                                                                                                                                                                  [48;1H~                                                                                                                                                                                                                  [49;1H~                                                                                                                                                                                                                  [50;1H~                                                                                                                                                                                                                  [51;1H~                                                                                                                                                                                                                  [52;1H~                                                                                                                                                                                                                  [53;1H~                                                                                                                                                                                                                  [54;1H~                                                                                                                                                                                                                  [55;1H~                                                                                                                                                                                                                  [0m[56;194H1,1[11CAll[1;1H[34h[?25h[?25l[56;184HA[1;1H[56;184H [1;8H[56;1H[1m-- INSERT --[0m[56;13H[K[56;194H1,8[11CAll[1;8H[34h[?25h[?25l[1;7H[K[56;196H7[1;7H[34h[?25h[?25l[1;6H[K[56;196H6[1;6H[34h[?25h[?25l[1;5H[K[56;196H5[1;5H[34h[?25h[?25lt[56;196H6[1;6H[34h[?25h[?25lu[56;196H7[1;7H[34h[?25h[?25ln[56;196H8[1;8H[34h[?25h[56;1H[K[?25l[56;194H1,7[11CAll[1;7H[34h[?25h[?25l[56;184H:[1;7H[56;184H[K[56;1H:[34h[?25hw[?25l"/etc/openvpn/server.conf" 8L, 165C written[1;7H[56;194H1,7[11CAll[56;194H[K[56;194H1,7[11CAll[1;7H[34h[?25h[?25l[56;184H:[1;7H[56;1H[K[56;1H:[34h[?25hq[?25l[56;1H[K[56;1H[?1l>[34h[?25h[?1049l[vagrant@server ~]$ sudo systemctl ewa[K[K[Krestart openvpn@server.service [K[K[K[K[K[K[K[K[K
[vagrant@server ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:9a:89:43 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic noprefixroute enp0s3
       valid_lft 85889sec preferred_lft 85889sec
    inet6 fe80::a00:27ff:fe9a:8943/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: enp0s8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:4e:67:dc brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.10/24 brd 192.168.56.255 scope global noprefixroute enp0s8
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe4e:67dc/64 scope link 
       valid_lft forever preferred_lft forever
5: tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/none 
    inet 10.10.10.1/24 brd 10.10.10.255 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::712f:b9c6:5a45:bf75/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
[vagrant@server ~]$ 
[vagrant@server ~]$ 
[vagrant@server ~]$ pgrep ipc[Kpe[K[Kerf3
7532
[vagrant@server ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ vagrant ssh serverclient
[?2004lActivate the web console with: systemctl enable --now cockpit.socket

Last login: Thu Sep 21 14:18:34 2023 from 10.0.2.2
[vagrant@client ~]$ ip asudo systemctl restart openvpn@server[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[4Pvim /etc/openvpn/server.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[2Piperf3 -c 10.10.10.1 -t 40 -i 5
Connecting to host 10.10.10.1, port 5201
[  5] local 10.10.10.2 port 48460 connected to 10.10.10.1 port 5201
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-5.00   sec   191 MBytes   320 Mbits/sec  112   95.1 KBytes       
[  5]   5.00-10.01  sec   136 MBytes   228 Mbits/sec  144    149 KBytes       
[  5]  10.01-15.00  sec   118 MBytes   198 Mbits/sec  110    107 KBytes       
[  5]  15.00-20.00  sec   185 MBytes   311 Mbits/sec  162   71.3 KBytes       
[  5]  20.00-25.00  sec   153 MBytes   257 Mbits/sec   48    321 KBytes       
[  5]  25.00-30.00  sec   121 MBytes   203 Mbits/sec  298    222 KBytes       
[  5]  30.00-35.00  sec   117 MBytes   196 Mbits/sec  269    231 KBytes       
[  5]  35.00-40.00  sec   121 MBytes   203 Mbits/sec  335    194 KBytes       
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-40.00  sec  1.11 GBytes   239 Mbits/sec  1478             sender
[  5]   0.00-40.14  sec  1.11 GBytes   238 Mbits/sec                  receiver

iperf Done.
[vagrant@client ~]$ logout
[?2004h[01;32mzoid@npc[00m:[01;34m~/projects/otus/2023-04-linux/34[00m$ [?2004l
exit

Script done on 2023-09-21 17:23:01+03:00 [COMMAND_EXIT_CODE="0"]
